<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="apple-touch-icon" type="image/png" href="/static/index_img/logo_icon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="72x72" href="/static/index_img/logo_icon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="114x114" href="/static/index_img/logo_icon.png">
    <link rel="icon" type="image/png" href="/static/index_img/logo_icon.png">
        <meta content="Haikyuu!!, ShowBox" name="keywords">
        <meta name="description" content="FEB is a free and powerful online disk tool, which can watch streaming media online, support most video formats, online reading, listening to music, cloud download, free files, article subscription, etc" />
        <title>Haikyuu!! Shared by ShowBox</title>
        <link rel="stylesheet" href="/static/css/style.css?rand=22da266f761676f71fe8891ff6af106a"/>
    <link href="/static/plugins/viewer/css/viewer.min.css?rand=22da266f761676f71fe8891ff6af106a" rel="stylesheet">
    <style>
        html,body{
            height:100%;
        }
        .header{background:rgba(41,41,41,.94)}
        .content{color:#333;padding-top:1px;height:calc(100% - 1px);min-width:1200px;}
        .content .file_share2_top{padding:18px 40px 18px 28px;border-bottom:1px solid #D8D8D8;}
        .content .file_share2_top .logo{vertical-align:middle;}
        .content .file_share2_top .file_info2{display:inline-block;margin-left:26px;vertical-align:middle;max-width:calc(100% - 712px);}
        .content .file_share2_top .file_info2 .name{font-size:16px;font-weight:600;line-height:19px;}
        .content .file_share2_top .file_info2 .desc{color:#666;font-size:12px;line-height:14px;margin-top:4px;}
        .content .file_share2_top .right2{float:right;margin-top:2px;font-size:0;}
        .content .file_share2_top .accept{height:32px;padding:0 24px;background:#0161FE;border-radius:60px;border:0;outline:0;color:#fff;font-size:13px;font-weight:500;}
        .content .file_share2_top .open_app{height:32px;padding:0 16px;background:rgba(1, 97, 254, 0.08);border-radius:60px;border:0;outline:0;color:#0161FE;font-size:13px;font-weight:500;}
        .content .file_share2_top .download,.content .file_share2_top .details{height:32px;padding:0 24px 0 18px;background:transparent;border-radius:60px;border:1px solid rgba(0,0,0,0.15);outline:0;color:#333;font-size:14px;font-weight:500;}
        .content .file_share2_top .download img,.content .file_share2_top .details img{vertical-align:middle;margin:-1px 4px 0 0;}
        .content .file_share2_top .share_more{display:inline-block;width:max-content;line-height:32px;margin-left:16px;vertical-align:top;}
        .content .file_share2_top .share_more  img{vertical-align:middle;}
        .content .file_share2_top .more_operation{position:absolute;width:136px;right:54px;top:52px;background:#fff;border-radius:6px;border:1px solid rgba(0,0,0,0.08);display:none;}
        .content .file_share2_top .more_operation p{padding:9px 16px;font-size:14px;cursor:pointer;}
        .content .file_share2_top .more_operation p:not(:last-child){border-bottom:1px solid rgba(0,0,0,0.05);}
        .content .file_share2_top .more_operation p img{vertical-align:middle;margin:-1px 4px 0 0;}
        .content .file_share2_top .split_line{display:inline-block;height:32px;border-left:1px solid rgba(0,0,0,0.05);margin-left:16px;}
        .content .file_share2_top .avatar{width:32px;height:32px;border-radius:18px;margin-left:16px;}
        .content .file_share2_top .login{height:32px;padding:0 30px;background:transparent;border-radius:60px;border:1px solid rgba(0,0,0,0.15);outline:0;color:#333;font-size:14px;font-weight:500;}
        .content .file_share2_top button{vertical-align:top;margin-left:16px;}
        .content .share{width:867px;margin:36px auto 0;padding:0 14px;height:calc(100% - 113px);position:relative;}
        .content .share .share_file,.content .file_info3 .file_img{width:100%;max-height:100%;position:absolute;top:50%;transform:translate(0, -50%);text-align:center;font-size:0;}
        .content .share .share_file .play_img,.content .file_info3 .file_img .play_img{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);}
        .content .share .share_file .file_icon{position:relative;}
        .content .share .share_file .icon2{position:absolute;bottom:3px;left:calc(50% - 8px);}
        .content .share .share_file .ext{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:#fff;font-size:24px;font-weight:bold;line-height:33px;}
        .content .share .share_file .file_name{color:#333;font-size:16px;font-weight:600;line-height:19px;margin-top:24px;}
        .content .share .share_file .desc2{color:rgba(0,0,0,0.7);font-size:13px;line-height:15px;margin-top:8px;}
        .content .share .share_file .time{color:rgba(0,0,0,0.4);font-size:13px;line-height:15px;margin-top:7px;}
        .content .share .user2 .avatar{width:24px;height:24px;border-radius:12px;vertical-align:middle;}
        .content .share .user2 span{color:#000;font-size:16px;font-weight:500;line-height:22px;vertical-align:middle;margin-left:8px;}
        .content .share .dir_info{margin-top:14px;font-size:0;}
        .content .share .dir_info img{vertical-align:middle;}
        .content .share .dir_info > p{width:54px;height:54px;position:relative;display:inline-block;vertical-align:middle;}
        .content .share .dir_info .left2{display:inline-block;width:calc(100% - 70px);margin-left:16px;vertical-align:middle}
        .content .share .dir_info .left2 .name{font-size:16px;font-weight:600;line-height:19px;}
        .content .share .dir_info .left2 .desc{color:rgba(0,0,0,0.4);font-size:12px;line-height:14px;margin-top:8px;}
        .content .share .dir_info .file_img2,.content .share .dir_info .file_img3{display:inline-block;width:54px;background-repeat:no-repeat;background-position:center;background-size:cover;}
        .content .share .dir_info .file_img3{position:absolute;right:-8px;bottom:-9px;border:1px solid #fff;}
        .content .share .files{border-top:1px solid #D8D8D8;margin-top:24px;height:calc(100% - 94px);padding-bottom:20px;}
        .content .share .files .info{margin-top:16px;position:relative;}
        .content .share .files .info .path{width:calc(100% - 125px);color:rgba(0,0,0,0.4);font-size:16px;font-weight:600;line-height:22px;white-space:nowrap;overflow:auto;}
        .content .share .files .info .path span:last-child{color:#000;}
        .content .share .files .info .path span:not(:last-child){cursor:pointer;}
        .content .share .files .info .list_type{float:right;font-size:0;position:absolute;top:4px;right:0;}
        .content .share .files .info .list_type img:not(:first-child){margin-left:16px;}
        .content .share .file_list{font-size:0;width:calc(100% + 12px);margin-top:16px;max-height:calc(100% - 54px);overflow:auto;scrollbar-width:none;-ms-overflow-style:none;}
        .content .share .file_list::-webkit-scrollbar{
            display:none;
        }
        .content .share .file_list img{vertical-align:middle;}
        .content .share .file_list.icon_list{width:100%;}
        .content .share .file_list.icon_list .file{border-bottom:1px solid rgba(0,0,0,0.05);font-size:0;}
        .content .share .file_list.icon_list .file:first-child{border-top:1px solid rgba(0,0,0,0.05);}
        .content .share .file_list.icon_list .file .left2{display:inline-block;width:calc(100% - 407px);padding:9px 9px 9px 0;font-size:0;vertical-align:middle;}
        .content .share .file_list.icon_list .file .left2 .file_icon{width: 28px;
            text-align:center;
            margin-right:10px;
            position:relative;
            display:inline-block;
            vertical-align:middle;
            line-height:28px;
            height: 28px;
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }
        .content .share .file_list.icon_list .file .left2 .file_icon img{
            max-width: 28px;
            max-height: 28px;
        }
        .content .share .file_list.icon_list .file .left2 .file_info{
            display: inline-block;
            vertical-align: middle;
            width: calc(100% - 48px);
        }
        .content .share .file_list.icon_list .file .left2 .file_name{
            font-size: 13.5px;
            color: rgba(0, 0, 0, 0.87);
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .content .share .file_list.icon_list .file .left2 .file_name_show {
            max-width: 160px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.65);
            padding: 4px 6px;
            background: #4D4D4D;
            border-radius: 2px;
            line-height: 13px;
            position: absolute;
            left: 120px;
            top: 30px;
            word-wrap: break-word;
            z-index: 6;
            display: none;
        }
        .content .share .file_list.icon_list .file .left2 .quality{
            margin-right: 4px;
            color: #999;
            font-size: 10px;
            font-weight: 400;
            margin-top: 4px;
            display: inline-block;
            background: rgba(216, 216, 216, 0.28);
            border-radius: 3px;
            padding: 1px 4px;
        }
        .content .share .file_list.icon_list .file .left2 .runtime {
            margin-right: 4px;
            color: #999;
            font-size: 10px;
            font-weight: 400;
            margin-top: 4px;
            display: inline-block;
            background: rgba(216, 216, 216, 0.28);
            border-radius: 3px;
            padding: 1px 4px;
        }
        .content .share .file_list.icon_list .file .file_size,.content .share .file_list.icon_list .file .file_type,.content .share .file_list.icon_list .file .file_time{
            display:inline-block;
            color:rgba(0, 0, 0, 0.65);
            font-size:13px;
            line-height:28px;
            padding:9px 8px;
            vertical-align:middle;
        }
        .content .share .file_list.gridType_list2,.content .share .file_list.waterfall_list{
            margin-left:-8px;
            width:calc(100% + 14px);
        }
        .content .share .file_list .file_thumbnail{
            width:160px;
            /*height:159px;*/
            padding:8px 8px 0;
            position:relative;
            display:inline-block;
            margin-top:18px;
            vertical-align:top;
        }
        .content .share .file_list .file_gridType{
            width:162.4px;
            border:1px solid rgba(0,0,0,0.08);
            border-radius:8px;
            margin-right:12px;
            padding:0 0 8px 0;
            margin-top:18px;
        }
        .content .share .file_list .file_waterfall{
            width:160px;
        }
        .content .share .file_list .file_waterfall .file_img{
            text-align:center;
        }
        .content .share .file_list .file_waterfall .file_img{
            position:relative;
        }
        .content .share .file_list .file_waterfall .file_icon2{
            width:100%;
            padding-top:100%;
            position:relative;
            background:#F7F8FA;
            border-radius:6px;
        }
        .content .share .file_list .file_waterfall .file_icon2{
            background-repeat:no-repeat;
            background-position:center;
            background-size:cover;
        }
        .content .share .file_list .file_waterfall .file_img .waterfall_img{
            background-repeat:no-repeat;
            background-position:center;
            background-size:cover;
        }
        .content .share .file_list .file_waterfall .file_img>div>img{
            max-width:200px;
            max-height:375px;
            min-width:120px;
            min-height:30px;
        }
        .content .share .file_list .file_waterfall .file_icon2 .folder_icon{
            min-width:16px;
            min-height:13px;
            position:absolute;
            left:4px;
            bottom:3px;
        }
        .content .share .file_list .file_waterfall .file_img .folder_icon{
            min-width:16px;
            min-height:13px;
            position:absolute;
            left:4px;
            bottom:3px;
        }
        .content .share .file_list .file_waterfall .file_img .music_num{
            position: absolute;
            top: 3px;
            right: 4px;
            height: 16px;
            padding: 0 4px;
            background: rgba(0,0,0,0.3);
            border-radius: 2px;
            color: #fff;
            font-size: 12px;
            line-height: 16px;
        }
        .content .share .file_list .file_waterfall .file_img .img2{
            position:absolute;
            top:50%;
            left:50%;
            transform:translate(-50%, -50%);
            max-width:64px;
            max-height:64px;
            min-width:0;
            min-height:0;
        }
        .content .share .file_list>div .file_thumbnail:nth-child(6n+1){
            margin-left:0;
        }
        .content .share .file_list .file_thumbnail{
            font-family: AtlasGrotesk,sans-serif;
        }
        .content .share .file_list .file_thumbnail:hover{
            background:rgba(0,0,0,0.05);
        }
        .content .share .file_list .file_thumbnail .file_icon{
            width:160px;
            height:160px;
            line-height:160px;
            text-align:center;
            position:relative;
            background-repeat:no-repeat;
            background-position:center;
            background-size:cover;
            border-radius:6px;
            background-color: rgba(0,0,0,0.05);
        }
        .content .share .file_list .file_gridType .file_icon{
            width:100%;
            height:116px;
            line-height:116px;
            border-bottom-left-radius:0;
            border-bottom-right-radius:0;
        }
        .content .share .file_list .file_thumbnail .file_icon>img{
            max-width:80%;
            max-height:80%;
        }
        .content .share .file_list .file_gridType .file_icon>img{
            max-width:50%;
            max-height:50%;
        }
        .content .share .file_list .file_gridType .file_icon .icon_bg{
            width:100%;
            height:116px;
            background-repeat:no-repeat;
            background-position:center;
            background-size:cover;
            border-top-left-radius:8px;
            border-top-right-radius:8px;
        }
        .content .share .file_list .file_thumbnail .file_icon .folder_icon{
            position:absolute;
            left:4px;
            bottom:3px;
        }
        .content .share .file_list .file_thumbnail .file_icon .music_num{
            position: absolute;
            top: 3px;
            right: 3px;
            height: 16px;
            padding: 0 4px;
            background: rgba(0,0,0,0.3);
            border-radius: 2px;
            color: #fff;
            font-size: 12px;
            line-height: 16px;
        }
        .content .share .file_list .file_thumbnail .file_name{
            color:rgba(0,0,0,0.86);
            font-size:0;
            text-align:center;
            margin-top:8px;
        }
        .content .share .file_list .file_gridType .file_name{
            padding:0 6px;
        }
        .content .share .file_list .file_thumbnail .file_name span{
            font-size:12px;
        }
        .content .share .file_list .file_thumbnail .file_name span{
            display:inline-block;
            max-width:calc(100% - 24px);
            overflow:hidden;
            text-overflow:ellipsis;
            white-space:nowrap;
        }
        .content .share .file_list .file_thumbnail .file_name img{
            margin-left:4px;
            vertical-align:top;
        }
        .content .share .file_list .file_waterfall .file_name3{
            color:rgba(0,0,0,0.86);
            font-size:0;
            margin-top:8px;
            word-break:break-all;
            text-overflow:-o-ellipsis-lastline;
            overflow:hidden;
            text-overflow:ellipsis;
            display:-webkit-box;
            -webkit-line-clamp:2;
            line-clamp:2;
            -webkit-box-orient:vertical;
        }
        .content .share .file_list .file_waterfall .file_name3 span{
            font-size:12px;
        }
        .content .share .file_list .file_thumbnail .file_name_show{
            max-width:160px;
            font-size:12px;
            color:rgba(255,255,255,0.65);
            padding:4px 6px;
            background:#4D4D4D;
            border-radius:2px;
            position:absolute;
            top:150px;
            left:50%;
            transform:translate(-50%, 0);
            z-index:6;
            word-wrap:break-word;
            display:none;
        }
        .content .share .file_list .file_thumbnail .file_name:hover + .file_name_show{
            display:block;
        }
        .content .share .file_list .file_thumbnail .file_info{
            display:inline-block;
            vertical-align:middle;
            width:100%;
            margin-top:4px;
            text-align:center;
        }
        .content .share .file_list .file_thumbnail .file_icon .file_info2,.content .share .file_list .file_thumbnail .file_img .file_info2{
            position:absolute;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background:rgba(0,0,0,0.2);
        }
        .content .share .file_list .file_thumbnail .file_icon .file_info2{
            border-radius:6px;
        }
        .content .share .file_list .file_thumbnail .file_icon .time,.content .share .file_list .file_thumbnail .file_img .time{
            position:absolute;
            top:2px;
            left:4px;
            background:rgba(0, 0, 0, 0.2);
            border-radius:3px;
            padding:2px 4px;
            color:rgba(255,255,255,0.86);
            font-size:10px;
            font-weight:500;
            line-height:15px;
        }
        .content .share .file_list .file_thumbnail .file_icon .quality,.content .share .file_list .file_thumbnail .file_img .quality{
            position:absolute;
            top:2px;
            right:4px;
            background:rgba(0, 0, 0, 0.2);
            border-radius:3px;
            padding:2px 4px;
            color:rgba(255,255,255,0.86);
            font-size:10px;
            font-weight:500;
            line-height:15px;
        }
        .content .share .file_list .file_thumbnail .file_icon .video_name,.content .share .file_list .file_thumbnail .file_img .video_name{
            position:absolute;
            top:50%;
            right:0;
            transform:translate(0, -50%);
            width:100%;
            padding:0 8px;
            color:rgba(255,255,255,0.6);
            font-size:11px;
            font-weight:500;
            overflow:hidden;
            text-overflow:ellipsis;
            white-space:nowrap;
        }
        .content .share .file_list .file_thumbnail .file_icon .score,.content .share .file_list .file_thumbnail .file_img .score{
            position:absolute;
            bottom:4px;
            left:4px;
            color:rgba(255,255,255,0.86);
            font-size:11px;
            font-weight:400;
            line-height:15px;
        }
        .content .share .file_list .file_thumbnail .file_icon .score img,.content .share .file_list .file_thumbnail .file_img .score img{
            margin:2.5px 4px 0 0;
            vertical-align:top;
        }
        .content .share .file_list .file_thumbnail .file_icon .file_name2{
            position:absolute;
            bottom:4px;
            width:calc(100% - 24px);
            padding:0 12px;
            color:rgba(255,255,255,0.48);
            font-size:12px;
            /*font-weight:500;*/
            text-align:center;
            line-height:14px;
            word-break:break-all;
            text-overflow:-o-ellipsis-lastline;
            overflow:hidden;
            text-overflow:ellipsis;
            display:-webkit-box;
            -webkit-line-clamp:2;
            line-clamp:2;
            -webkit-box-orient:vertical;
        }
        .content .share .file_list .file_thumbnail .last_time{
            margin-right:4px;
            color:#007AFF;
            font-size:12px;
            font-weight:500;
            display:inline-block !important;
        }
        .content .share .file_list .file_thumbnail>p:last-child{
            margin-top:6px;
            text-align:center;
            /*display:none;*/
        }
        .content .password{margin-top:180px;text-align:center}
        .content .password .avatar{width:64px;height:64px;border-radius:32px}
        .content .password .name{color:rgba(0,0,0,.4);font-size:14px;margin-top:16px}
        .content .password .pwd input{width:260px;height:44px;background:rgba(217,217,217,.2);border-radius:22px;border:0;outline:0;font-size:16px;margin-top:48px;text-align:center}
        .content .password .pwd input::-webkit-input-placeholder{color:rgba(0,0,0,.4)}
        .content .password .view_btn button{width:260px;height:44px;border-radius:22px;background:#0070ff;border:0;outline:0;color:#fff;font-size:16px;font-weight:500;margin-top:24px}
        .content .password .expire_time{color:rgba(0,0,0,.29);font-size:12px;font-weight:500;margin-top:16px}
        .content .download_app{color:#333;font-size:14px;font-weight:500;margin-top:113px;}
        .content .download_app a{color:#007AFF;text-decoration:underline;}
        .content .save_tip{position:fixed;top:64px;padding:8px 0;width:100%;background:#FFEAC3;text-align:center;z-index:99;}
        .content .save_tip p{color:rgba(0,0,0,0.6);font-size:12px;}
        .content .save_tip img{position:absolute;right:10px;top:7px;}
        .content .share_tips{position:fixed;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,0.5);}
        .content .share_tips > p{width:60%;position:absolute;left:50%;top:100px;transform:translate(-50%, 0);min-width:300px;max-width:1000px;}
        .content .file_info3{position:fixed;width:100%;height:100%;top:0;left:0;background:#fff;display:none;}
        .content .file_info3 .file_img{top:calc(50% + 67px);}
        .content .file_info3 .file_img .tip{color:rgba(0,0,0,0.6);font-size:14px;line-height:20px;margin-top:32px;}
        .content .file_info3 .file_img .tip a{color:#0070FF;}
        .content .file_info3 .file_top{padding:16px 40px 16px 30px;border-bottom:1px solid #D8D8D8;}
        .content .file_info3 .close2{vertical-align:middle;}
        .content .file_info3 .info2{display:inline-block;margin-left:26px;vertical-align:middle;}
        .content .file_info3 .info2 .name{font-size:14px;font-weight:600;line-height:16px;}
        .content .file_info3 .info2 .desc{color:#666;font-size:12px;line-height:14px;margin-top:4px;}
        .content .file_info3 .right2{float:right;margin-top:2px;}
        .content .file_info3 .accept{height:32px;padding:0 24px;background:#0161FE;border-radius:60px;border:0;outline:0;color:#fff;font-size:13px;font-weight:500;}
        .content .file_info3 .open_app{height:32px;padding:0 16px;background:rgba(1, 97, 254, 0.08);border-radius:60px;border:0;outline:0;color:#0161FE;font-size:13px;font-weight:500;}
        .content .file_info3 .download,.content .file_info3 .details{height:32px;padding:0 24px 0 18px;background:transparent;border-radius:60px;border:1px solid rgba(0,0,0,0.15);outline:0;color:#333;font-size:14px;font-weight:500;}
        .content .file_info3 .download img,.content .file_info3 .details img{vertical-align:middle;margin:-1px 4px 0 0;}
        .content .file_info3 .split_line{display:inline-block;height:32px;border-left:1px solid rgba(0,0,0,0.05);margin-left:16px;}
        .content .file_info3 .avatar{width:32px;height:32px;border-radius:18px;margin-left:16px;}
        .content .file_info3 .login{height:32px;padding:0 30px;background:transparent;border-radius:60px;border:1px solid rgba(0,0,0,0.15);outline:0;color:#333;font-size:14px;font-weight:500;}
        .content .file_info3 button{vertical-align:top;margin-left:16px;}
        #video_bg,.download_tip_popup2,.login_tip_popup{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,0.5);z-index:9999;display:none;}
        #video_bg .video_con{width:95%;height:90%;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background:#000;}
        #player_panel #player_box{display:none;}
        .download_progress{width:500px;background:#fff;padding:16px 24px;border-radius:8px;position:fixed;bottom:16px;right:16px;box-shadow: -6px 0px 6px 0px rgba(0, 0, 0, 0.05);border: 1px solid rgba(0, 0, 0, 0.05);z-index:99;display:none;}
        .download_progress .close2{position:absolute;top:16px;right:16px;}
        .download_progress .name{color:#333;font-size:16px;font-weight:500;margin-top:4px;}
        .download_progress #progress{margin-top:12px;height:14px;appearance:none;}
        #progress::-webkit-progress-bar {
            border-radius: 7px;
            background-color: #f3f3f3;
        }
        #progress::-webkit-progress-value {
            border-radius: 7px;
            background-color: #007AFF; /* 进度条的颜色 */
        }
        .download_tip_popup2 .download_tip_con,.login_tip_popup .login_tip_con{width:450px;background:#fff;border-radius:8px;color:#333;position:relative;top:50%;left:50%;transform:translate(-50%, -50%);}
        .download_tip_popup2 .download_tip_con .top,.login_tip_popup .login_tip_con .top{padding:14px 16px;text-align:right;}
        .download_tip_popup2 .download_tip_con .desc,.login_tip_popup .login_tip_con .desc{padding:0 22px;color:#333;font-size:14px;line-height:17px;margin-top:10px;}
        .download_tip_popup2 .download_tip_con .bottom,.login_tip_popup .login_tip_con .bottom{padding:16px;border-top:1px solid rgba(0,0,0,0.06);margin-top:24px;text-align:right;}
        .download_tip_popup2 .download_tip_con .bottom button,.login_tip_popup .login_tip_con .bottom button{height:32px;padding:0 16px;background:transparent;border-radius:6px;border:1px solid rgba(0,0,0,0.07);outline:0;color:#333;font-size:14px;font-weight:600;}
        .download_tip_popup2 .download_tip_con .bottom button:not(:first-child),.login_tip_popup .login_tip_con .bottom button:not(:first-child){margin-left:16px;}
        .download_tip_popup2 .download_tip_con .bottom button:first-child,.login_tip_popup .login_tip_con .bottom button:first-child{background:#0070FF;color:#fff;}
        .img_lists{display:none}
        .content .open_error{width:max-content;color:#FF3B30;font-size:14px;text-decoration:underline;position:absolute;bottom:90px;left:50%;transform:translate(-50%, 0);}
        .content .install_tip{width:max-content;font-size:14px;text-decoration:underline;position:absolute;bottom:90px;left:50%;transform:translate(-50%, 0);}
        .login_tip,.login_tip2{position:absolute;left:60px;bottom:120px;background:rgba(13, 13, 13, 0.69);padding:13px 16px 13px 18px;border-radius:6px;font-size:15px;line-height:18px;z-index:999;}
        .login_tip a,.login_tip2 a{color:#007AFF;vertical-align:middle;}
        .login_tip span,.login_tip2 span{color:rgba(255,255,255,0.6);vertical-align:middle;}
        .login_tip img,.login_tip2 img{margin-left:16px;vertical-align:middle;}
        .login_tip2{left:50%;transform:translate(-50%, 0);bottom:54px;padding:9px 16px 9px 18px;border-radius:40px;}
        .loading2{
            height:100%;width:100%;background:rgba(0,0,0,0.5);position:fixed;top:0;left:0;display:none;z-index:999999;
        }
        .loading2 >p{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;height:80px;width:80px;text-align: center;line-height:80px;}
        .loading2 p span{position:absolute;display:block;height:60px;width:60px;margin:10px;border-radius:50%;-webkit-box-shadow:0 2px 3px #56BEBF; animation:loading ease 1s infinite;left:0;top:0;}
        @keyframes loading2{
            0%{transform:rotate(0deg)}
            100%{transform:rotate(360deg)}
        }
    </style>
</head>
<body>
    <div class="content">
        <!--        <div class="save_tip">-->
<!--            <p>您正在访问的是国际版，文件可能无法保存。</p>-->
<!--            <img src="/static/index_img/mobile/tip_close.png" width="18">-->
<!--        </div>-->
        <div class="file_share2_top">
            <img src="/static/index_img/mobile/logo.png" width="27" class="logo" onclick="window.location='/'">
                        <div class="file_info2">
                                <p class="name">ShowBox invites you to collaborate</p>
                                            </div>
            <div class="right2">
                                <button class="accept" onclick="window.location='/console?shareid=LY16nsIi'">Accept Collaboration</button>
                                <button class="open_app" id="open_app_share">OPEN IN FEB APP</button>
                <button class="download"><img src="/static/index_img/file_btn/download.png" width="16">Download</button>
                                <p class="share_more"><img src="/static/index_img/share_more.png" width="24"></p>
                <div class="more_operation">
                    <p class="report2" onclick="window.location='/report?url=https%3A%2F%2Fwww.febbox.com%2Fshare%2FLY16nsIi'">Reoprt</p>
                </div>
                                <span class="split_line"></span>
                                <img src="https://images.febbox.com/avatar/000/78/24/70_avatar_middle.jpg?t=1748037315" onerror="this.src='/static/img/avatar_default.png';" class="avatar">
                                <div class="sidebar">
                    <div class="user">
                        <div class="user_info2">
                            <img src="https://images.febbox.com/avatar/000/78/24/70_avatar_middle.jpg?t=1748037315" onerror="this.src='/static/img/avatar_default.png';" class="avatar2" data-uid="782470">
                            <div class="left2">
                                <p class="name">Nayif_Noushad</p>
                                                                <p class="status"><img src="/static/index_img/free2.png" width="30"></p>
                                                            </div>
                            <img src="/static/index_img/info.png" width="8" class="user_info">
                        </div>
                        <!--                    <div class="follow2">-->
                        <!--                        <p class="following"><span></span> Following</p>-->
                        <!--                        <span class="line"></span>-->
                        <!--                        <p class="follower"><span></span> Follower</p>-->
                        <!--                    </div>-->
                    </div>
                    <div class="capacity_size">
                        <div class="capacity">
                            <p class="used" style="width:85.5%%"></p>
                            <p class="sub_space" style="width:0%;"></p>
                            <p class="exceed_progress" style="width:0%;"></p>
                        </div>
                                                <p class="desc">875.77 GB of 1 TB Used</p>
                                            </div>
                    <ul>
                        <a href="/channel/channel_dynamic"><li><span class="new"></span>Channel</li></a>
                        <a href="/article/news"><li>News Center</li></a>
                        <a href="javascript:void(0);" class="devices_btn"><li>Devices</li></a>
                        <a href="javascript:void(0);" class="links_btn"><li>Links</li></a>
                        <a href="/pay/charge" class="feb_coins"><li>FebCoins <span>( 0 )</span></li></a>
                        <a href="/pay/orders"><li>Transactions</li></a>
                        <a href="/ticket"><li>Tickets</li></a>
                        <a href="/faq"><li>Help</li></a>
                        <a href="/download"><li>Download Apps</li></a>
                        <a href="/logout"><li>Logout</li></a>
                    </ul>
                </div>
                            </div>
        </div>
        <div class="share">
            <!--            <p class="user2"><img src="https://images.febbox.com/avatar/000/00/00/23_avatar_middle.jpg?t=1648138654" onerror="this.src='/static/img/avatar_default.png';" class="avatar"><span>ShowBox invites you to collaborate</span></p>-->
            <div class="dir_info">
                <p>
                                <img src="/static/index_img/file_type/dir_icon2.png" width="54">
                                </p>
                <div class="left2">
                                        <p class="name">Haikyuu!!</p>
                    <p class="desc">85 files · 113.02 GB · </p>
                                    </div>
            </div>
            <div class="files">
                <div class="info">
                    <p class="path">
                                                <span data-id="0">Haikyuu!!</span>
                        <!--                        /<span>music</span>-->
                    </p>
                    <p class="list_type">
                                                <img src="/static/index_img/grid2.png" width="16" class="grid2">
                                                <img src="/static/index_img/grid.png" width="16" class="grid">
                                                <img src="/static/index_img/waterfall.png" width="16" class="waterfall">
                                                <img src="/static/index_img/list.png" width="16" class="list">
                                            </p>
                </div>
                <div class="file_list icon_list">
                    <div class="f_list_scroll">
                                        <div class="file open_dir" data-id="2772341" data-path="season 4">
                        <div class="left2">
                            <div class="file_icon" >
                                                                <img src="/static/index_img/file_type/dir_icon.png">
                                                                                            </div>
                            <div class="file_info">
                                <p class="file_name">season 4</p>
                                <p class="file_name_show">season 4</p>
                                                            </div>
                        </div>
                                                <p class="file_size" style="width:110px;">33.98 GB</p>
                                                <p class="file_type" style="width:100px;">Folder</p>
                                                <p class="file_time" style="width:140px;">2021-09-30 19:49:17</p>
                    </div>
                                                            <div class="file open_dir" data-id="2772330" data-path="season 3">
                        <div class="left2">
                            <div class="file_icon" >
                                                                <img src="/static/index_img/file_type/dir_icon.png">
                                                                                            </div>
                            <div class="file_info">
                                <p class="file_name">season 3</p>
                                <p class="file_name_show">season 3</p>
                                                            </div>
                        </div>
                                                <p class="file_size" style="width:110px;">11.64 GB</p>
                                                <p class="file_type" style="width:100px;">Folder</p>
                                                <p class="file_time" style="width:140px;">2021-09-30 13:10:32</p>
                    </div>
                                                            <div class="file open_dir" data-id="2772304" data-path="season 2">
                        <div class="left2">
                            <div class="file_icon" >
                                                                <img src="/static/index_img/file_type/dir_icon.png">
                                                                                            </div>
                            <div class="file_info">
                                <p class="file_name">season 2</p>
                                <p class="file_name_show">season 2</p>
                                                            </div>
                        </div>
                                                <p class="file_size" style="width:110px;">40.23 GB</p>
                                                <p class="file_type" style="width:100px;">Folder</p>
                                                <p class="file_time" style="width:140px;">2021-09-29 21:49:15</p>
                    </div>
                                                            <div class="file open_dir" data-id="2772278" data-path="season 1">
                        <div class="left2">
                            <div class="file_icon" >
                                                                <img src="/static/index_img/file_type/dir_icon.png">
                                                                                            </div>
                            <div class="file_info">
                                <p class="file_name">season 1</p>
                                <p class="file_name_show">season 1</p>
                                                            </div>
                        </div>
                                                <p class="file_size" style="width:110px;">27.17 GB</p>
                                                <p class="file_type" style="width:100px;">Folder</p>
                                                <p class="file_time" style="width:140px;">2021-09-29 06:27:26</p>
                    </div>
                                                            </div>
                </div>
            </div>
                    </div>
        <div class="file_info3">
            <div class="file_top">
                <img src="/static/index_img/popup_close.png" width="16" class="close2">
                <div class="info2">
                    <p class="name">aabb.png</p>
                    <p class="desc">Jun 11,2021 13:33 · 1.23 MB</p>
                </div>
                <div class="right2">
                    <button class="download"><img src="/static/index_img/file_btn/download.png" width="16">Download</button>
                    <button class="details"><img src="/static/index_img/mobile/info.png" width="16">Attribute</button>
                    <span class="split_line"></span>
                                        <img src="https://images.febbox.com/avatar/000/78/24/70_avatar_middle.jpg?t=1748037315" onerror="this.src='/static/img/avatar_default.png';" class="avatar">
                                    </div>
            </div>
            <div class="file_img">

            </div>
        </div>
        <div class="share_tips" style="display: none;">
            <p style="display: none;" class="tips"><img src="/static/index_img/mobile/share_tips.png" width="100%"></p>
            <p style="display: none;" class="tips2"><img src="/static/index_img/mobile/share_tips2.png" width="100%"></p>
            <p style="display: none;" class="tips3"><img src="/static/index_img/mobile/share_tips3.png" width="100%"></p>
            <p style="display: none;" class="tips4"><img src="/static/index_img/mobile/share_tips4.png" width="100%"></p>
            <p style="display: none;" class="tips5"><img src="/static/index_img/mobile/share_tips5.png" width="100%"></p>
            <p style="display: none;" class="tips6"><img src="/static/index_img/mobile/share_tips6.png" width="100%"></p>
            <p style="display: none;" class="tips7"><img src="/static/index_img/wechat_windows_tip.png" width="100%"></p>
            <p style="display: none;" class="tips8"><img src="/static/index_img/wechat_mac_tip.png" width="100%"></p>
        </div>
        <textarea id="copy_share_link_input" readonly style="width: 1px;border: none;height: 1px;top: -99999999px;display:none;">https://www.febbox.com/share/LY16nsIi</textarea>
            </div>
    <div class="download_progress">
        <img src="/static/index_img/popup_close.png" width="13" class="close2">
        <p class="name">Downloading</p>
        <progress id="progress" value="0" max="100" style="width: 100%;color:#007AFF;"></progress>
    </div>
    <div class="download_tips_popup">
        <div class="download_tips">
            <div class="top">
                <span>Download</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="download_tips_con">
                <div class="download_file_info">
                    <p class="file_img"><img src="" ></p>
                    <div class="left">
                        <p class="file_name"></p>
                        <p class="file_size"></p>
                    </div>
                </div>
                <p class="desc">The file is too large, please receive before downloading</p>
                <p class="accept"><a href="/console?shareid=LY16nsIi"><button>Accept</button></a></p>
            </div>
        </div>
    </div>
    <div class="file_details_popup">
        <div class="file_details">
            <div class="top">
                <span>Details</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="file_details_con">

            </div>
        </div>
    </div>
    <div class="download_tip_popup2">
        <div class="download_tip_con">
            <div class="top">
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <p class="desc">Currently not logged in, download speed will be restricted. Do you want to log in?</p>
            <div class="bottom">
                <button onclick="window.location='/login?jump=/share/LY16nsIi'">Login</button>
                <button class="continue_d">Continue Download</button>
            </div>
        </div>
    </div>
    <div class="login_tip_popup">
        <div class="login_tip_con">
            <div class="top">
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <p class="desc">Currently not supported for preview without login, please log in first</p>
            <div class="bottom">
                <button onclick="window.location='/login?jump=/share/LY16nsIi'">Login</button>
            </div>
        </div>
    </div>
        <div class="FebCards_popup">
        <div class="FebCards_con">
            <div class="top">
                <span>FebCards</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="FebCards">
                <div class="user_card">
                    <div class="user_info">
                        <img src="" class="avatar">
                        <div class="left">
                            <p class="username">Effie Becker</p>
                            <p class="status"><img src="/static/index_img/family.png" width="44"></p>
                            <p class="email">Effie <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1c5e797f77796e5c7b717d7570327f7371">[email&#160;protected]</a></p>
                        </div>
                    </div>
                    <p class="uid">12361278412</p>
                    <div class="family_info">
                        <p><span>Family Plan Expired 06/14/2021</span><img src="/static/index_img/auto.png" width="28"></p>
                        <img src="/static/index_img/into2.png" width="8">
                    </div>
                </div>
                <div class="vip_card" id="card1">
                    <p class="card_name">VIP Plan</p>
                    <div class="card_info">
                        <p><img src="/static/index_img/space2.png" width="14">2 TB Space</p>
                        <p><img src="/static/index_img/speed.png" width="14">High-Speed</p>
                        <p><img src="/static/index_img/no_ad.png" width="14">No Ads</p>
                    </div>
                    <a href="/pay/vip">
                        <div class="vip_info">
                            <p>Manage Plan</p>
                            <img src="/static/index_img/into2.png" width="8">
                        </div>
                    </a>
                </div>
                <div class="space_card" id="card2">
                    <p class="card_name">Space Usage</p>
                    <div class="card_info">
                        <div class="used">
                            <p><span>50GB</span> / <span>1000GB</span></p>
                            <p><img src="/static/index_img/users.png" width="14"><span>5 Users</span></p>
                        </div>
                        <div class="progress">
                            <p style="width:20%"></p>
                            <p class="sub_space" style="width:15%;"></p>
                            <p class="exceed_progress" style="width:0%;"></p>
                        </div>
                    </div>
                    <div class="space_info">
                        <p>Manage space</p>
                        <img src="/static/index_img/into2.png" width="8">
                    </div>
                </div>
                <div class="coins_card" onclick="window.location='/pay/charge';" id="card3">
                    <p class="card_name">Febcoins</p>
                    <div class="card_info">
                        <img src="/static/index_img/coins2.png" width="30">
                        <span>3000</span>
                    </div>
                    <div class="coins">
                        <img src="/static/index_img/into2.png" width="8">
                    </div>
                </div>
                <div class="speed_card" id="card4">
                    <p class="card_name">Speed Limited</p>
                    <div class="card_info">
                        <p>NO LIMITED</p>
                        <p class="record">30 GB Used Today</p>
                        <p class="record">30 MB Used Yesterday</p>
                    </div>
                    <div class="speed_info">
                        <img src="/static/index_img/into2.png" width="8">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="my_plan_popup">
        <div class="my_plan_con">
            <div class="top">
                <span>My Plan</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="my_plan_close">
            </div>
            <div class="my_plan">
                <div class="user_info">
                    <img src="https://images.febbox.com/avatar/000/78/24/70_avatar_middle.jpg?t=1748037315" onerror="this.src='/static/img/avatar_default.png';" class="avatar" data-uid="782470">
                    <div class="left">
                        <p class="name">Nayif_Noushad</p>
                        <p class="email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c0aea1b9a9a6b6a5aca9b9a1f9f980a7ada1a9aceea3afad">[email&#160;protected]</a></p>
                    </div>
                    <button class="renew" onclick="window.location.href='/pay/vip';">Renew</button>
                </div>
                <div class="plan_info">
                    <p class="name">
                        <span>My Plan</span>
                        <span class="plan_history">History</span>
                    </p>
                    <p class="plan current_plan">
                        <span>Current Plan</span>
                        <span></span>
                    </p>
                    <p class="plan time">
                        <span>Premium Expire</span>
                        <span></span>
                    </p>
                </div>
                <div class="members">

                </div>
            </div>
        </div>
    </div>
        <div class="space_popup">

    </div>
    <div class="high_speed_popup">
        <div class="high_speed_con">
            <div class="top">
                <span>High Speed Flow</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="high_speed">
                <p class="img"><img src="/static/index_img/no_limit.png" width="156"></p>
                <div class="usage">
                    <p>Usage</p>
                    <p></p>
                </div>
                <div class="flow_reset">
                    <p>Flow Reset</p>
                    <p></p>
                </div>
                <div class="tips">
                    <p>1. 100 GB / Mon for free users, reset every 30 days, 100 GB / Day for Premium, reset every day.</p>
                    <p>2. When the high speed flow runs out, it will automatically enter the low speed mode, other functions will not be affected.</p>
                    <p><a href="/faq">More</a></p>
                </div>
                <div class="bottom">
                    <p>100 GB / day for Premium</p>
                    <a href="/plan"><button class="upgrade">Upgrade</button></a>
                </div>
            </div>
        </div>
    </div>
    <div class="plan_history_popup">
        <div class="plan_history_con">
            <div class="top">
                <span>History</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="history_list">
                <div class="history_list_scroll">
                    <div class="history">
                        <p class="date">2021-1-12</p>
                        <div class="plan">
                            <img src="/static/index_img/single_plan.png" width="40">
                            <div class="left">
                                <p class="name">Premium-Single Plan</p>
                                <p class="time">6 Months · Auto Renew</p>
                            </div>
                            <p class="status">Effective</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="family_add_popup">
        <div class="family_add_con">
            <div class="top">
                <span>Add Members</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="family_add">
                <p class="invite_add">
                    <input type="text" name="email" placeholder="Enter User Email">
                    <button class="btn invite_btn">Invite</button>
                </p>
                <p class="invite_tips">You cannot add users who is a Premium user or family plan account</p>
            </div>
        </div>
    </div>
    <div class="devices_popup">
        <div class="devices_con">
            <div class="top">
                Devices                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="devices">
                <p class="desc">Display the device information of the logged-in account, log out of unfamiliar devices to ensure information security</p>
                <p class="name">Logged-in devices (<span></span>)</p>
                <p class="device_type"><span class="web_device active">Browsers</span><span class="app_device">APPs</span></p>
                <div class="device_list webs">
                    <div class="device_list_scroll">

                    </div>
                </div>
                <div class="device_list apps">
                    <div class="device_list_scroll">

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="link_file_list_popup">
        <div class="link_file_list_con">
            <div class="top">
                <span>Link Management</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="link_file_list">
                <div class="link_file_list_scroll">

                </div>
            </div>
        </div>
    </div>
    <div class="invite_link_list_popup">
        <div class="invite_link_list_con">
            <div class="top">
                <span>Link Management</span>
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <p class="name">Links generated from “<span></span>”</p>
            <div class="link_type">
                <p class="copy_links show">Copy Links</p>
                <p class="share_links">Working Together</p>
            </div>
            <div class="link_list copy_link_list">

            </div>
            <div class="link_list share_link_list">

            </div>
        </div>
    </div>
    <div class="movie_file_quality_popup">
        <div class="movie_file_quality_con">
            <div class="top">
                <img src="/static/index_img/file_btn/close.png" width="16" class="popup_close">
            </div>
            <div class="movie_file_quality">

            </div>
        </div>
    </div>
    <div class="loading2">
        <p><span></span></p>
    </div>
    <ul class="img_lists" id="img_lists">
        <li class="img show" data-id="" read_only="0"><img src="" alt=""></li>
    </ul>
    <div id="video_bg">
        <div class="video_con">
            <img id="video_close" src="/static/index_img/close_btn.png" style="width:32px;position:absolute;right:-16px;top:-16px;">
            <div id="player_loading" style="position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);"><img src="/static/index_img/load.gif"></div>
            <div style="padding: 10px;height:calc(100% - 20px);" id="player_panel">
                <div id="player_box" class="player_box"></div>
                <!--                    <video id="player_box" class="player_box" controls playsinline></video>-->
            </div>
        </div>
    </div>
    <a href="" class="download2" target="_blank" download></a>
    <div class="footer">
    <div class="info">
        <div class="left">
            <p class="footer_logo"><img src="/static/index_img/logo_new.png" width="112" /></p>
            <p class="payment">
                <img src="/static/index_img/pay_mode.png" width="214" />
            </p>
            <p class="desc">We are committed to bringing the cheapest and best storage experience to our users, and we will continue to update our products to meet more needs</p>
        </div>
        <div class="right">
            <div>
                <p class="first">FEB</p>
                <p><a href="/faq">FAQ</a></p>
                <p><a href="/changelog">Update log</a></p>
                <p><a href="/report">Report</a></p>
                <p><a href="/open">Open Platform</a></p>
                <p><a href="/FEB">News Center</a></p>
            </div>
            <div>
                <p class="first">Download</p>
                <p><a href="/download/app_ios">iPhone</a></p>
                <p><a href="/download/app_android">Android</a></p>
                <p><a href="/download/app_ios">iPadOS</a></p>
                <p><a href="/download/app_windows">Windows</a></p>
                <p><a href="/download/app_mac">MacOS</a></p>
            </div>
            <div>
                <p class="first">Legal</p>
                <p><a href="/about">About Us</a></p>
                <p><a href="/Terms_of_Service">Terms of Service</a></p>
                <p><a href="/privacy_policy">Privacy Policy</a></p>
                <p><a href="/copyright_policy">Copyright Policy</a></p>
                <p><a href="/acceptable_use_policy">Acceptable Use Policy</a></p>
                <p><a href="/report">DMCA</a> <a href="/report/report_publicity" style="margin-left:8px;">Statistics</a></p>
            </div>
        </div>
    </div>
    <div class="copyright">
                <p>Copyright @ 2020-2025 TOPSPEED NETWORK LIMITED Inc. All rights reserved</p>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://accounts.google.com/gsi/client" async></script>
<script>
function handleCredentialResponse(response) {
    //alert(response.credential);
    if (response.credential) {
        const userInfo = parseJwt(response.credential);
        console.log("User Info:", userInfo);
        $.ajax({
            url: '/login/google_login_verify?ajax=1',
            type: 'post',
            dataType: 'json',
            cache: false,
            data: {
                'id_token': response.credential,
                'email': userInfo.email,
                'name': userInfo.name,
                'avatar': userInfo.picture,
            },
            success: function(data){
                if (data.code == 1) {
                    top.location.reload();
                } else {
                    alert(data.msg);
                }
            }
        });
    } else {
        // 用户取消登录
        console.log('登录流程被取消');
    }
}

function parseJwt(token) {
    // JWT 分为三部分：Header、Payload 和 Signature，通常通过 `.` 分隔
    const base64Url = token.split('.')[1];  // 获取第二部分（Payload）
    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');  // 替换 URL 安全的字符

    // 解码 Base64
    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    // 返回解析后的 JSON 对象
    return JSON.parse(jsonPayload);
}

// function handleCredentialResponse(response) {
//     // response.credential 是一个 ID token，通常用于认证
//     console.log(response.credential); // 你可以根据实际需求发送这个信息给你的后端进行进一步验证

//     // 例如，发送到后端进行认证：
//     fetch('/your_login_endpoint', {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json'
//         },
//         body: JSON.stringify({ credential: response.credential })
//     }).then(res => {
//         // 根据后端的响应处理
//         return res.json();
//     }).then(data => {
//         // 后端登录成功的逻辑，例如设置登录状态，跳转等
//         console.log(data);
//     });
// }
</script>
<script src="/static/js/jquery-3.5.1.min.js?rand=22da266f761676f71fe8891ff6af106a"></script>
<script src="/static/js/jquery.cookie.js?rand=22da266f761676f71fe8891ff6af106a"></script>
<script type="text/javascript" src="/lang/js"></script>
<script>
    var region = 'world';
    $(".language").click(function(){
        //$(".select_lang").css("display","block");
        $(".sidebar").hide();
        $.ajax({
            url: '/index/region?ajax=1',
            type: 'get',
            dataType: 'text',
            success: function(data){
                $(".region_set_con").html(data).show();
            }
        });

    });
    $(document).click(function(){
        $(".select_lang").hide();
        $(".new_list .article .article_operate").hide();
        $(".new_list .article .reason_list").hide();
    });
    $(".language").click(function(event){
        event.stopPropagation();
    });

    // if (region != 'china' && region != 'snowtop') {
        $(".sign_in").click(function(){
            $(".login_popup").css("display","block");
        });
        $(document).click(function(){
            $(".login_popup").hide();
        });
        $(".sign_in").click(function(event){
            event.stopPropagation();
        });
        $(".top_info .more").click(function(event){
            event.stopPropagation();
            $(".login_popup").css("display","block");
        });
    // } else {
    //     $(".sign_in").click(function(){
    //         window.location.href = '/login/login_cn';
    //     });
    // }




    $("#top_nav_userinfo").click(function(){
        $(".sidebar").css("display","block");
        $(".select_lang").hide();
        //$(".sidebar").show();
        $.ajax({
            url: '/console/user_info',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    if(data.user.article_new == 1){
                        $(".sidebar ul li .new").css('display','inline-block');
                    }else{
                        $(".sidebar ul li .new").hide();
                    }
                    $(".sidebar .user .avatar2").attr("src",data.user.avatar);
                    $(".sidebar .user .name").html(data.user.username);
                    $(".sidebar .capacity .used").css("width",data.user.progress+'%');
                    $(".sidebar .capacity .sub_space").css("width",data.user.sub_progress+'%');
                    $(".sidebar .capacity .exceed_progress").css("width",data.user.exceed_progress+'%');
                    if(data.user.quota_used2 > data.user.quota_total2){
                        $(".sidebar .capacity_size .desc").html('<span class="exceed_space">'+data.user.quota_used+'</span> of '+data.user.quota_total+' Used');
                    }else{
                        $(".sidebar .capacity_size .desc").text(data.user.quota_used+' of '+data.user.quota_total+' Used');
                    }
                    $(".sidebar ul .feb_coins span").text('( '+data.user.amount+' )');
                    if(data.user.is_vip === 1){
                        if(data.user.family > 0){
                            $(".sidebar .user .status").html('<img src="/static/index_img/family.png" width="44">');
                        }else{
                            $(".sidebar .user .status").html('<img src="/static/index_img/vip2.png" width="25">');
                        }
                    }else{
                        $(".sidebar .user .status").html('<img src="/static/index_img/free2.png" width="30">');
                    }
                }else{
                    // alert(data.msg);
                }
            }
        });
    });

    $(document).click(function(){
        $(".sidebar").hide();
        $(".follow_operate").hide();
        $(".following_list_con .sort_list").hide();
        $(".setting_con .sort_mode").hide();
        $(".webdav_account_list_con .account .state .operate_list").hide();
    });

    $(".following_list_con .popup_close").click(function(){
        $(".following_list_popup").hide();
    });

    $(".sidebar .user .following,.sidebar .show_channel,.following_list_con .channel_info .following").click(function(){
        follow_page = 1;
        $(".loading2").show();
        var sort = getCookie('follows_sort');
        if(!sort){
            sort = '';
        }
        $.ajax({
            url : "/channel/follow_list",
            type : 'get',
            data: {'type2':0,'sort':sort},
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".following_list_con .sort_list p").removeClass('active');
                    if(sort == 'follow_time_asc'){
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }else if(sort == 'last_article_time_desc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'last_article_time_asc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'username_desc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else if(sort == 'username_asc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else{
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }
                    $(".following_list_con .following_list_scroll").html(data.html);
                    $(".following_list_con").attr("type",0);
                    // $(".following_list_con .top span").text('Following');
                    $(".following_list_con .name2").text('Following');
                    $(".following_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".file_save_popup .popup_close").click(function(){
        $(".file_save .dir_path span:first-child").nextAll().remove();
        $(".file_save_popup").hide();
    });

    $(document).on("click",".file_save .dir_list li",function(){
        var val = $(this).attr("data-val");
        var name = $(this).find(".name").text();
        var id = $(this).attr("data-id");
        $(".loading2").show();
        dir_list_page = 1;
        $.ajax({
            url: '/console/dir_list?'+val,
            type: 'get',
            dataType: 'json',
            success: function (data) {
                $(".loading2").hide();
                if(data.code === 1){
                    var dir_list = data.data.file_list;
                    $(".file_save .dir_list").html('');
                    $(".file_save .dir_list").attr("data-val",data.id);
                    $(".file_save .dir_path").append('<span><img src="/static/index_img/file_btn/path_right.png" width="10"></span>\n' +
                        '                    <span data-val="'+val+'">'+name+'</span>');
                    for (var i=0; i<dir_list.length; i++){
                        if(dir_list[i].fid_org){
                            // var param = val.replace(/parent_id=.*/, 'parent_id='+dir_list[i].fid_org);
                            // param = 'fid='+dir_list[i].fid_org+'&from_uid='+dir_list[i].from_uid+'&'+param;
                            // var html = '<li data-id="'+dir_list[i].fid+'" data-val="'+param+'">\n';
                        }else{
                            var param = val.replace(/parent_id=.*/, 'parent_id='+dir_list[i].fid);
                            var html = '<li data-id="'+dir_list[i].fid+'" data-val="'+param+'">\n';

                            html += '                          <img src="/static/index_img/file_type/'+dir_list[i].file_icon+'.png" width="40">\n' +dir_list[i].receive_icon+
                                '                        <div class="left">\n' +
                                '                            <p class="name">'+dir_list[i].file_name+'</p>\n' +
                                '                            <p class="time">'+dir_list[i].time+'</p>\n' +
                                '                        </div>\n' +
                                '                        </li>';
                            $(".file_save .dir_list").append(html);
                        }
                    }
                }else{
                    // alert(data.msg);
                    $(".error_tips .txt").text(data.msg);
                    $(".error_tips").show().delay(3000).hide(300);
                }
            }
        });
    });

    $(document).on("click",".file_save .dir_path span:not(:last-child)",function(){
        var val = $(this).attr("data-val");
        $(this).nextAll().remove();
        $(".loading2").show();
        dir_list_page = 1;
        $.ajax({
            url: '/console/dir_list?'+val,
            type: 'get',
            dataType: 'json',
            success: function (data) {
                $(".loading2").hide();
                if(data.code === 1){
                    var dir_list = data.data.file_list;
                    $(".file_save .dir_list").html('');
                    if(val === undefined){
                        $(".file_save .dir_list").attr("data-val",0);
                    }else{
                        $(".file_save .dir_list").attr("data-val",data.id);
                    }
                    for (var i=0; i<dir_list.length; i++){
                        if(dir_list[i].fid_org){
                            // var param = val.replace(/parent_id=.*/, 'parent_id='+dir_list[i].fid_org);
                            // param = 'fid='+dir_list[i].fid_org+'&from_uid='+dir_list[i].from_uid+'&'+param;
                            // var html = '<li data-id="'+dir_list[i].fid+'" data-val="'+param+'">\n';
                        }else{
                            var param = val.replace(/parent_id=.*/, 'parent_id='+dir_list[i].fid);
                            var html = '<li data-id="'+dir_list[i].fid+'" data-val="'+param+'">\n';

                            html += '                          <img src="/static/index_img/file_type/'+dir_list[i].file_icon+'.png" width="40">\n' +dir_list[i].receive_icon+
                                '                        <div class="left">\n' +
                                '                            <p class="name">'+dir_list[i].file_name+'</p>\n' +
                                '                            <p class="time">'+dir_list[i].time+'</p>\n' +
                                '                        </div>\n' +
                                '                        </li>';
                            $(".file_save .dir_list").append(html);
                        }
                    }
                }else{
                    // alert(data.msg);
                    $(".error_tips .txt").text(data.msg);
                    $(".error_tips").show().delay(3000).hide(300);
                }
            }
        });
    });

    $(".file_save .save").click(function(){
        var parent_id = $(".file_save .dir_list").attr("data-val");
        if($(".file_save").hasClass("cloud_download_save")){
            var path = '';
            $(".file_save .dir_path span").each(function(index){
                var name = $(this).text();
                if(name){
                    path += name;
                }else{
                    path += '/';
                }
            });
            $(".cloud_download_con .path2").attr("data-val",parent_id);
            $(".cloud_download_con .path2 span").text(path);
            $(".bt_details_con .path2").attr("data-val",parent_id);
            $(".bt_details_con .path2 span").text(path);
            setCookie("cloud_download_path",path);
        }else if($(".file_save").hasClass("webdav_path")){
            var path = '';
            $(".file_save .dir_path span").each(function(index){
                var name = $(this).text();
                if(name){
                    path += name;
                }else{
                    path += '/';
                }
            });
            $(".webdav_create_account_con .webdav_create_account .directory span").text(path).attr("data-fid",parent_id);
            $(".webdav_setting_con .info .path").text(path).attr("data-fid",parent_id);
        }else if($(".file_save").hasClass("dir_home_add")){

        }else{

        }
        $(".file_save_popup").hide();
    });

    $(".sidebar .user .follower").click(function(){
        follow_page = 1;
        $(".loading2").show();
        var sort = getCookie('follows_sort');
        if(!sort){
            sort = '';
        }
        $.ajax({
            url : "/channel/follow_list",
            type : 'get',
            data: {'type2':1,'sort':sort},
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".following_list_con .sort_list p").removeClass('active');
                    if(sort == 'follow_time_asc'){
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }else if(sort == 'last_article_time_desc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'last_article_time_asc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'username_desc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else if(sort == 'username_asc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else{
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }
                    $(".following_list_con .following_list_scroll").html(data.html);
                    $(".following_list_con").attr("type",1);
                    // $(".following_list_con .top span").text('Follower');
                    $(".following_list_con .name2").text('Followers');
                    $(".following_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".following_list_con .channel_info").click(function () {
        var channel_id = $(this).attr('data-id');
        window.location.href = '/'+channel_id;
    });

    $(".following_list_con .sort2").click(function (e) {
        e.preventDefault();
        e.stopPropagation();
        $(".following_list_con .sort_list").show();
    });

    $(".following_list_con .sort_list p").click(function () {
        var sort = getCookie('follows_sort');
        if($(this).hasClass('follow_time')){
            if(!sort || sort == 'follow_time_desc'){
                sort = 'follow_time_asc';
                setCookie('follows_sort', sort);
            }else{
                sort = 'follow_time_desc';
                setCookie('follows_sort', sort);
            }
        }
        if($(this).hasClass('article_time')){
            if(sort == 'last_article_time_desc'){
                sort = 'last_article_time_asc';
                setCookie('follows_sort', sort);
            }else{
                sort = 'last_article_time_desc';
                setCookie('follows_sort', sort);
            }
        }
        if($(this).hasClass('username_sort')){
            if(sort == 'username_desc'){
                sort = 'username_asc';
                setCookie('follows_sort', sort);
            }else{
                sort = 'username_desc';
                setCookie('follows_sort', sort);
            }
        }
        $(".loading2").show();
        var type = $(".following_list_con").attr("type");
        $.ajax({
            url: '/channel/follow_list',
            type: 'get',
            data: {'type2':type,'sort':sort},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".following_list_con .sort_list p").removeClass('active');
                    if(sort == 'follow_time_asc'){
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }else if(sort == 'last_article_time_desc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'last_article_time_asc'){
                        $(".following_list_con .sort2").html('Last Updated<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .article_time").addClass('active');
                    }else if(sort == 'username_desc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else if(sort == 'username_asc'){
                        $(".following_list_con .sort2").html('Username<img src="/static/index_img/sort_asc.png" width="16" class="follow_asc">');
                        $(".following_list_con .sort_list .username_sort").addClass('active');
                    }else{
                        $(".following_list_con .sort2").html('Last Followed<img src="/static/index_img/sort_desc.png" width="16" class="follow_desc">');
                        $(".following_list_con .sort_list .follow_time").addClass('active');
                    }
                    $(".following_list_con .following_list_scroll").html(data.html);
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.following_list_con .following_list .user2 .info2', function (){
        var channel_id = $(this).attr('data-id');
        window.location.href = '/'+channel_id;
    });

    var follow_page_status = false;
    $(".following_list_con .following_list").scroll(function(){
        var htmlHeight = $(".following_list_con .following_list_scroll").height();
        var scrollTop = $(this).scrollTop();
        var height = $(this).height();
        if(scrollTop+height>=htmlHeight-1 && !follow_page_status){
            follow_page_status = true;
            follow_page++;
            var type = $(".following_list_con").attr("type");
            var sort = getCookie('follows_sort');
            if(!sort){
                sort = '';
            }
            $.ajax({
                url: '/channel/follow_list',
                type: 'get',
                data: {'page2':follow_page,'type2':type,'sort':sort},
                dataType: 'json',
                success: function(data){
                    follow_page_status = false;
                    if(data.html){
                        $(".following_list_con .following_list_scroll").append(data.html);
                    }else{
                        follow_page--;
                    }
                }
            });
        }
    });

    $(document).on("click", ".following_list_con .following_list .user2 .list .article2", function(e){
        e.preventDefault();
        e.stopPropagation();
        var username = $(this).parents(".user2").find('.info2 .name').text();
        var img = $(this).parents(".user2").find('.info2 .avatar').attr('src');
        var name = $(this).find('.name').text();
        var time = $(this).find('.time').text();
        var own_level = $(this).parents(".user2").attr('data-level');
        var id = $(this).attr('data-id');
        var level = $(this).attr('data-level');
        var channel = $(this).parents(".user2").find('.info2 a').attr('href');
        if(own_level >= level){
            window.location.href = '/channel/article/'+id;
        }else{
            $(".article_no_power_con .article_no_power .article .title2").text(name);
            $(".article_no_power_con .article_no_power .article .avatar").attr('src',img);
            $(".article_no_power_con .article_no_power .article .user2 span").text(username+' · '+time);
            $(".article_no_power_con .article_no_power .desc span:first-child").text('LV'+own_level);
            $(".article_no_power_con .article_no_power .desc span:last-child").text('LV'+level);
            $(".article_no_power_con .article_no_power a").attr('href', channel);
            $(".article_no_power_popup").show();
        }
    });

    $(".article_no_power_con .popup_close,.article_no_power_con .cancel").click(function (){
        $(".article_no_power_popup").hide();
    });

    $(document).on("click", ".following_list_con .following_list .user2 .follow", function(e){
        e.preventDefault();
        e.stopPropagation();
        if($(this).hasClass('followed')){
            $(this).parent().find(".follow_operate").show();
            return;
        }
        var auth = $(this).parent().attr('data-auth');
        var follow = $(this);
        $.ajax({
            url: '/channel/follow',
            type: 'post',
            data: {'id':auth},
            dataType: 'json',
            success: function(data){
                if(data.code === 1){
                    follow.html('<img src="/static/index_img/channel/block_notice.png" width="16"><span>'+fb_lang.channel_followed+'</span><img src="/static/index_img/mobile/lower.png" width="16">').addClass('followed');
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.following_list_con .following_list .follow_operate .notice', function(e){
        var auth = $(this).parents(".info2").attr('data-auth');
        var follow = $(this).parents(".info2").find(".follow");
        $.ajax({
            url: '/channel/notice_update',
            type: 'post',
            data: {'id':auth,'notice':1},
            dataType: 'json',
            success: function(data){
                if(data.code === 1){
                    follow.html('<img src="/static/index_img/channel/notice.png" width="16"><span>'+fb_lang.channel_followed+'</span><img src="/static/index_img/mobile/lower.png" width="16">')
                }else{
                    alert(data.msg);
                }
            }
        })
    });
    $(document).on('click', '.following_list_con .following_list .follow_operate .block_notice', function(e){
        var auth = $(this).parents(".info2").attr('data-auth');
        var follow = $(this).parents(".info2").find(".follow");
        $.ajax({
            url: '/channel/notice_update',
            type: 'post',
            data: {'id':auth,'notice':0},
            dataType: 'json',
            success: function(data){
                if(data.code === 1){
                    follow.html('<img src="/static/index_img/channel/block_notice.png" width="16"><span>'+fb_lang.channel_followed+'</span><img src="/static/index_img/mobile/lower.png" width="16">');
                }else{
                    alert(data.msg);
                }
            }
        })
    });

    $(document).on('click', '.following_list_con .following_list .follow_operate .unfollow', function(e){
        var auth = $(this).parents(".info2").attr('data-auth');
        var follow = $(this).parents(".info2").find(".follow");
        $.ajax({
            url: '/channel/follow_delete',
            type: 'post',
            data: {'id':auth},
            dataType: 'json',
            success: function(data){
                if(data.code === 1){
                    $(".follow_operate").hide();
                    follow.html(fb_lang.channel_follow).removeClass("followed");
                }else{
                    alert(data.msg);
                }
            }
        })
    });

    $(document).on('click', '.setting_con .home_setting', function (){
        $(".loading2").show();
        $.ajax({
            url : "/console/home_dirs",
            type : 'get',
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".home_set_con .settings").html(data.data.html);
                    $(".home_set_popup").show();

                    $(".home_set_con .settings").sortable({
                        update: function (event, ui) {
                            var idList = $(this).sortable("toArray", { attribute: "data-id" });
                            window.home_order = idList;
                        }
                    });

                    $(".home_set_con .settings").off('touchstart').off('touchend');
                    $(".home_set_con .settings").on({
                        touchstart:function(e){
                            if($(e.target).closest(".drag_sort").length > 0){
                                $(".home_set_con .settings").css("overflow","hidden");
                                dragula([document.querySelector('.home_set_con .settings')], {
                                    moves: function (el, container, handle) {
                                        return handle.className === 'drag_sort';
                                    }
                                });
                            }
                        },
                        touchend:function(e){
                            $(".home_set_con .settings").css("overflow","");
                        }
                    });
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".home_set .popup_close").click(function(){
        $(".home_set_popup").hide();
    });

    $(document).on('click', '.home_set_con .settings input', function (){
        $(".loading2").show();
        var fid = $(this).parents('.one').attr('data-id');
        var enable = $(this).prop('checked');
        if(enable){
            enable = 1;
        }else{
            enable = 0;
        }
        $.ajax({
            url : "/console/home_dir_enable",
            type : 'post',
            data : {'fid':fid,'enable':enable},
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){

                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.home_set_con .settings .del', function (){
        $(".loading2").show();
        var fid = $(this).parents('.one').attr('data-id');
        var set = $(this).parents('.one')
        $.ajax({
            url : "/console/home_dir_delete",
            type : 'post',
            data : {'fid':fid},
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    set.remove();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.home_set_con .bottom .save', function (){
        var h_arr = [];
        $(".home_set_con .settings .one").each(function (){
            var id = $(this).attr("data-id");
            h_arr.push(id);
        });
        $(".loading2").show();
        $.ajax({
            url : "/console/home_dir_sort",
            type : 'post',
            data : {'sort':JSON.stringify(h_arr)},
            dataType : 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    if(location.hash == '#/home' || location.hash == ''){
                        $(".loading").show();
                        $.ajax({
                            url: '/console/home',
                            type: 'get',
                            dataType: 'json',
                            success: function(data){
                                $(".loading").hide();
                                $("#frame-all").html(data.html);
                            }
                        });
                    }
                    $(".home_set_popup").hide();
                    $(".success_tips span:nth-child(2)").text('Successful');
                    $(".success_tips").show().delay(3000).hide(300);
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".setting_con .mode_change").click(function(e){
        e.stopPropagation();
        var sort_mode = getCookie('sort_mode');
        $(".setting_con .sort_mode > div").removeClass("selected2");
        if(sort_mode == 'independent'){
            $(".setting_con .sort_mode > div:last-child").addClass("selected2");
        }else{
            $(".setting_con .sort_mode > div:first-child").addClass("selected2");
        }
        if($(".setting_con .sort_mode").is(':hidden')){
            $(".setting_con .sort_mode").show();
        }else{
            $(".setting_con .sort_mode").hide();
        }
    });
    $(".setting_con .sort_mode > div").click(function(){
        var sort_mode = $(this).attr('data-val');
        var name = $(this).find('.name').text();
        setCookie('sort_mode',sort_mode);
        $(".setting_con .sort_mode > div").removeClass("selected2");
        $(this).addClass("selected2");
        $(".setting_con .mode_change span").text(name);
        $(".setting_con .sort_mode").hide();
    });

    $(".setting_con .server_select").click(function(){
        $(".loading_popup").show();
        $.ajax({
            url: '/console/speed_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading_popup").hide();
                if(data.code === 1){
                    $(".speed_test_con .speed_test_list").html(data.data.html);
                    $(".speed_test_popup").show();

                    var t = 0;
                    var h = 0;
                    test_list = [];
                    speed_list = data.data.list;
                    for (var i = 0; i < data.data.list.length; i++) {
                        setTimeout(function () {
                            speed(data.data.list[h]['100m_url'], data.data.list[h]['group_id'], data.data.list[h]['id']);
                            h++;
                        }, t);
                        t = t+5000;
                    }
                }else{
                    alert(data.msg)
                }
            }
        })
    });

    $(".time_zone_list_con .popup_close").click(function(){
        $(".time_zone_list_popup").hide();
    });

    $(".setting_con .time_zone").click(function(e){
        $(".loading_popup").show();
        $.ajax({
            url: '/console/timezone_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading_popup").hide();
                if(data.code === 1){
                    if(data.data.local_timezone){
                        if(data.data.local_active == 1){
                            $(".time_zone_list_con .local_timezone .recommend_timezone").addClass('active');
                        }
                        $(".time_zone_list_con .local_timezone .recommend_timezone").text(data.data.local_timezone);
                        $(".time_zone_list_con .local_timezone").show();
                    }else{
                        $(".time_zone_list_con .local_timezone").hide();
                    }
                    $(".time_zone_list_con .timezone_list").html(data.data.html);
                    $(".time_zone_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        })
    });

    $(document).on('click', '.time_zone_list_con .timezone_list p,.time_zone_list_con .local_timezone .recommend_timezone', function(){
        if($(this).hasClass('recommend_timezone')){
            var timezone = $(this).text();
        }else{
            var timezone = $(this).find('span:last-child').text();
        }
        var p = $(this);
        $(".loading2").show();
        $.ajax({
            url: '/console/set_timezone',
            type: 'POST',
            data: {'timezone':timezone},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".time_zone_list_con .timezone_list p").removeClass('active');
                    $(".time_zone_list_con .local_timezone .recommend_timezone").removeClass('active');
                    p.addClass('active');
                    $(".setting_con .time_zone p span").text(timezone);
                    $(".time_zone_list_popup").hide();
                }else{
                    alert(data.msg);
                }
            }
        })
    });

    $(".speed_test_con .popup_close").click(function (){
        $(".speed_test_popup").hide();
    });

    $(document).on('click', '.speed_test_con .server', function(){
        var server = $(this).attr("data-id");
        $(".speed_test_con .checked").removeClass("checked");
        $(this).addClass("checked");
        setCookie('oss_group',server);
    });

    $(".setting_con .user2").click(function(){
        $(".personal_info_popup").show();
    });
    $(".personal_info_popup .popup_close").click(function(){
        $(".personal_info_popup").hide();
    });

    $(".personal_info_con .avatar2 span,.personal_info_con .username img").click(function(e){
        // e.stopPropagation();
        var img = $(".personal .user_info .avatar2").attr("src");
        var name = $(".personal .user_info .name").text();
        $(".edit_profile_con .edit_profile .avatar img").attr("src",img);
        $(".edit_profile_con .edit_profile .name input").val(name);
        $(".edit_profile_popup").show();
    });
    $(".edit_profile_popup .popup_close,.edit_profile_popup .cancel").click(function(){
        $(".edit_profile_popup").hide();
    });

    $(".edit_profile_con #user_avatar").change(function(){
        $(".edit_profile_con .edit_profile .avatar img").attr("src",URL.createObjectURL($(this)[0].files[0]));
    });

    $(".edit_profile_con .done").click(function(){
        $(".loading2").show();
        var avatar = $("#user_avatar")[0].files[0];
        var name = $(".edit_profile_con .name input").val();
        if(name === undefined){
            name = '';
        }
        if(avatar === undefined){
            avatar = '';
        }
        if(name || avatar){
            var formdatas = new FormData();
            formdatas.append('avatar',avatar);
            formdatas.append('name',name);
            $.ajax({
                url: '/console/edit_user_profile',
                type: 'POST',
                data: formdatas,
                processData: false,
                contentType: false,
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        if(avatar){
                            $(".top_right .avatar").attr("src",data.avatar).attr("data-cfsrc",data.avatar);
                            $(".personal .user_info .avatar2").attr("src",data.avatar).attr("data-cfsrc",data.avatar);
                            $(".edit_profile .user2 .img").attr("src",data.avatar).attr("data-cfsrc",data.avatar);
                            $(".personal_info_con .user_info_edit .avatar2 img").attr("src",data.avatar)
                        }
                        if(name){
                            $(".personal .user_info .name").text(name);
                            $(".edit_profile .user2 .name2 span").text(name);
                            $(".personal_info_con .user_info_edit .username span").text(name);
                        }
                        $(".edit_profile_popup").hide();
                        $(".operation_status .name").text("Edit Success");
                        $(".operation_status").show().delay(1000).hide(300);
                    }else{
                        alert(data.msg);
                    }
                }
            });
        }
    });

    $(".setting_popup .popup_close").click(function(){
        $(".setting_popup").hide();
    });

    $(".sidebar .setting").click(function(){
        var img = $(".personal .user_info .avatar2").attr("src");
        var name = $(".personal .user_info .name").text();
        $(".setting_con .edit_profile .avatar .img").attr("src",img);
        $(".setting_con .edit_profile .name input").attr("placeholder",name);
        var sort_mode = getCookie("sort_mode");
        if(sort_mode){
            $(".setting_con .sort_set .mode_change span").text(sort_mode.slice(0,1).toUpperCase() +sort_mode.slice(1).toLowerCase());
        }
        $(".setting_popup").show();
    });

    $(".personal_info_con .security").click(function(){
        $(".account_security_popup").show();
    });
    $(".account_security_popup .popup_close").click(function(){
        $(".account_security_popup").hide();
    });

    $(".webdav_account_list_con .popup_close").click(function (){
        $(".webdav_account_list_popup").hide();
    });

    $(".setting_con .setting .webdav").click(function(){
        $(".loading_popup").show();
        $.ajax({
            url: '/console/webdav_account_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading_popup").hide();
                if(data.code === 1){
                    $(".webdav_account_list_con .webdav_account_list").html(data.html);
                    $(".webdav_account_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".webdav_create_account_con .popup_close").click(function (){
        $(".webdav_create_account_popup").hide();
    });

    $(document).on('click', '.webdav_account_list_con .add_account', function (){
        $('.webdav_create_account_con .webdav_create_account .directory span').text('FEB:/').attr('data-fid', 0);
        $('.webdav_create_account_con .webdav_create_account .webdav_username').val('');
        $('.webdav_create_account_con .webdav_create_account .webdav_pwd').val('');
        $('.webdav_create_account_con .webdav_create_account .webdav_pwd2').val('');
        $('.webdav_create_account_popup').show();
    });

    $(document).on('click', '.webdav_create_account_con .directory,.webdav_setting_con .info .path', function (){
        $(".loading_popup").show();
        dir_list_page = 1;
        $.ajax({
            url: '/console/dir_list',
            type: 'get',
            dataType: 'json',
            success: function (data) {
                $(".loading_popup").hide();
                if(data.code === 1){
                    var dir_list = data.data.file_list;
                    $(".file_save .dir_path").html('<span data-val="parent_id=0">FEB</span>');
                    $(".file_save .dir_list").html('');
                    for (var i=0; i<dir_list.length; i++){
                        if(dir_list[i].fid_org){
                            // var html = '<li data-id="'+dir_list[i].fid+'" data-val="'+'fid='+dir_list[i].fid_org+'&from_uid='+dir_list[i].from_uid+'&parent_id='+dir_list[i].fid_org+'">\n';
                        }else{
                            var html = '<li data-id="'+dir_list[i].fid+'" data-val="parent_id='+dir_list[i].fid+'">\n';

                            html += '                            <img src="/static/index_img/file_type/'+dir_list[i].file_icon+'.png" width="40">\n' +dir_list[i].receive_icon+
                                '                        <div class="left">\n' +
                                '                            <p class="name">'+dir_list[i].file_name+'</p>\n' +
                                '                            <p class="time">'+dir_list[i].time+'</p>\n' +
                                '                        </div>\n' +
                                '                        </li>';
                            $(".file_save .dir_list").append(html);
                        }
                    }
                    $(".file_save").removeClass().addClass("file_save").addClass("webdav_path");
                    $(".file_save .top span").text(fb_lang.console_save_to);
                    $(".file_save_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.webdav_create_account_con .create', function (){
        var fid = $('.webdav_create_account_con .webdav_create_account .directory span').attr('data-fid');
        var username = $('.webdav_create_account_con .webdav_username').val();
        var pwd = $('.webdav_create_account_con .webdav_pwd').val();
        var pwd2 = $('.webdav_create_account_con .webdav_pwd2').val();
        if(!username){
            $(".error_tips .txt").text('The username cannot be empty');
            $(".error_tips").show().delay(3000).hide(300);
            return;
        }
        if(username.length > 16){
            $(".error_tips .txt").text('The username cannot exceed 16 characters');
            $(".error_tips").show().delay(3000).hide(300);
            return;
        }
        if(!pwd || !pwd2){
            $(".error_tips .txt").text('Password cannot be empty');
            $(".error_tips").show().delay(3000).hide(300);
            return;
        }
        if(pwd != pwd2){
            $(".error_tips .txt").text('Two passwords are inconsistent');
            $(".error_tips").show().delay(3000).hide(300);
            return;
        }
        $(".loading2").show();
        $.ajax({
            url: '/console/save_webdav_account',
            type: 'get',
            data: {'parent_id':fid,'username':username,'password':pwd,'password2':pwd2},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $('.webdav_create_account_popup').hide();
                    $(".loading_popup").show();
                    $.ajax({
                        url: '/console/webdav_account_list',
                        type: 'get',
                        dataType: 'json',
                        success: function(data){
                            $(".loading_popup").hide();
                            if(data.code === 1){
                                $(".webdav_account_list_con .webdav_account_list").html(data.html);
                                $(".webdav_account_list_popup").show();
                            }else{
                                alert(data.msg);
                            }
                        }
                    });
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.webdav_account_list_con .account .state .more', function (e){
        e.stopPropagation();
        $(".webdav_account_list_con .account .state .operate_list").hide();
        $(this).next().show();
    });

    $(".webdav_setting_con .back").click(function (){
        $(".webdav_setting_popup").hide();
    });

    $(document).on('click', '.webdav_account_list_con .account .operate_list .edit', function (){
        var id = $(this).parents('.account').attr('data-id');
        $(".loading2").show();
        $.ajax({
            url: '/console/webdav_account_info',
            type: 'post',
            data: {'id':id},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    if(data.data.status == 1){
                        $(".webdav_setting_con .access_set input[name='status']").prop('checked', true);
                    }else{
                        $(".webdav_setting_con .access_set input[name='status']").prop('checked', false);
                    }
                    if(data.data.read_only == 1){
                        $(".webdav_setting_con .access_set input[name='read_only']").prop('checked', true);
                    }else{
                        $(".webdav_setting_con .access_set input[name='read_only']").prop('checked', false);
                    }
                    $(".webdav_setting_con .info .path").text(data.data.path).attr('data-fid',data.data.path_fid);
                    $(".webdav_setting_con").attr('data-id', data.data.id);
                    $(".webdav_setting_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on('click', '.webdav_setting_con .top .save', function (){
        var id = $(this).parents('.webdav_setting_con').attr('data-id');
        var fid = $(".webdav_setting_con .info .path").attr('data-fid');
        if(!$(".webdav_setting_con .access_set input[name='status']").is(":checked")){
            var status = 0;
        }else{
            var status = 1;
        }
        if(!$(".webdav_setting_con .access_set input[name='read_only']").is(":checked")){
            var read_only = 0;
        }else{
            var read_only = 1;
        }
        $(".loading2").show();
        $.ajax({
            url: '/console/webdav_account_edit',
            type: 'post',
            data: {'id':id, 'status':status, 'read_only':read_only, 'fid':fid},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".webdav_setting_popup").hide();
                    $(".loading_popup").show();
                    $.ajax({
                        url: '/console/webdav_account_list',
                        type: 'get',
                        dataType: 'json',
                        success: function(data){
                            $(".loading_popup").hide();
                            if(data.code === 1){
                                $(".webdav_account_list_con .webdav_account_list").html(data.html);
                                $(".webdav_account_list_popup").show();
                            }else{
                                alert(data.msg);
                            }
                        }
                    });
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on("click",".webdav_setting_con .copy_text",function(){
        var url = $(this).parent().find("span").text();
        copyText(url);
    });

    $(document).on('click', '.webdav_account_list_con .account .operate_list .delete', function (){
        var id = $(this).parents('.account').attr('data-id');
        var account = $(this).parents('.account');
        $(".loading2").show();
        $.ajax({
            url: '/console/webdav_account_del',
            type: 'post',
            data: {'id':id},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    account.remove();
                    $(".success_tips span:nth-child(2)").text('Delete successful');
                    $(".success_tips").show().delay(3000).hide(300);
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".block_user_list_con .popup_close").click(function(){
        $(".block_user_list_popup").hide();
    });

    var block_page = 1;
    $(document).on("click",".personal_info_con .block_list",function(){
        block_page = 1;
        $(".loading_popup").show();
        $.ajax({
            url: '/console/block_user_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading_popup").hide();
                if(data.code === 1){
                    $(".block_user_list_con .block_user_list .list_scroll2").html(data.html);
                    $(".block_user_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    var block_status = 0;
    $(".block_user_list_con .block_user_list").scroll(function() {
        var htmlHeight = $(".block_user_list_con .block_user_list .list_scroll2").height();
        var clientHeight = $(this).height();
        var scrollTop = $(this).scrollTop();
        // console.log(htmlHeight, clientHeight, scrollTop);
        if (scrollTop + clientHeight >= htmlHeight - 1 && !block_status) {
            $(".loading_popup").show();
            block_status = 1;
            block_page++;
            $.ajax({
                url: '/console/block_user_list',
                type: 'get',
                data: {'page':block_page},
                dataType: 'json',
                success: function(data){
                    block_status = 0;
                    $(".loading_popup").hide();
                    if(data.code === 1){
                        if(!data.html){
                            block_page--;
                        }
                        $(".block_user_list_con .block_user_list .list_scroll2").append(data.html);
                        $(".block_user_list_popup").show();
                    }else{
                        block_page--;
                        alert(data.msg);
                    }
                }
            });
        }
    });

    $(document).on("click",".block_user_list_con .unblock",function(){
        var id = $(this).parent().attr("data-uid");
        if(!id){
            alert('not user');
        }
        var user = $(this).parent();
        $(".loading2").show();
        $.ajax({
            url: '/console/file_comment_block',
            type: 'post',
            data: {'id':id,'type':'delete'},
            dataType: 'json',
            success: function (data) {
                $(".loading2").hide();
                if(data.code === 1){
                    user.remove();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $("#top_nav_userinfo").click(function(event){
        event.stopPropagation();
    });

    $(".devices_btn").click(function(){
        $(".loading2").show();
        $.ajax({
            url: '/index/device_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".devices_con .webs .device_list_scroll").html(data.html2);
                    $(".devices_con .apps .device_list_scroll").html(data.html);
                    $(".devices_con .devices .name span").text(data.count);
                    $(".devices_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".devices_popup .popup_close").click(function () {
        $(".devices_popup").hide();
    });

    $(".devices_con .device_type span").click(function(){
        $(".devices_con .device_type span").removeClass('active');
        $(this).addClass('active');
        if($(this).hasClass('app_device')){
            $(".devices_con .device_list.webs").hide();
            $(".devices_con .device_list.apps").show();
        }else{
            $(".devices_con .device_list.apps").hide();
            $(".devices_con .device_list.webs").show();
        }
    });

    $(document).on("click",".devices_con .device_list .device .log_out",function(){
        var open_udid = $(this).parent().attr("data-val");
        $(".loading2").show();
        var web = '';
        if($(this).parent().hasClass("device_web")){
            web = 1;
        }
        var device = $(this).parent();
        $.ajax({
            url: '/console/device_quit',
            type: 'post',
            data: {'open_udid':open_udid,'web':web},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    device.remove();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".links_btn").click(function(){
        $(".loading2").show();
        $.ajax({
            url: '/console/link_list',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".link_file_list_con .link_file_list .link_file_list_scroll").html(data.html);
                }
                $(".link_file_list_popup").show();
            }
        });
    });

    var link_file_page = 1;
    var link_file_ppp = 0;
    $(".link_file_list_con .link_file_list").scroll(function(){
        var htmlHeight = $(".link_file_list_con .link_file_list .link_file_list_scroll").height();
        var scrollTop = $(this).scrollTop();
        var height = $(this).height();
        if(scrollTop+height>=htmlHeight-1 && !link_file_ppp){
            link_file_ppp = 1;
            link_file_page++;
            $.ajax({
                url : "/console/link_list",
                type : 'get',
                data : {'page':link_file_page},
                dataType : 'json',
                success: function(data){
                    link_file_ppp = 0;
                    if(data.html){
                        $(".link_file_list_con .link_file_list .link_file_list_scroll").append(data.html);
                    }else{
                        link_file_page--;
                    }
                }
            });
        }
    });

    $(".link_file_list_popup .popup_close").click(function () {
        $(".link_file_list_popup").hide();
    });

    $(document).on("click",".link_file_list_con .link_file_list .link_file",function(){
        var name = $(this).find(".file_name").text();
        var fid = $(this).attr("data-id");
        $(".loading2").show();
        $.ajax({
            url: '/console/file_link2?fid='+fid,
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".invite_link_list_con .name span").text(name);
                    $(".invite_link_list_con .copy_link_list").html(data.copy_html);
                    $(".invite_link_list_con .share_link_list").html(data.share_html);
                    $(".invite_link_list_con .share_link_list").hide();
                    $(".invite_link_list_con .link_type .share_links").removeClass("show");
                    $(".invite_link_list_con .link_type .copy_links").addClass("show");
                    $(".invite_link_list_con .copy_link_list").show();
                    $(".invite_link_list_con .link_type").show();
                    $(".invite_link_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on("click",".invite_link_list_con .top .popup_close",function(){
        $(".invite_link_list_popup").hide();
    });

    $(document).on("click",".share_file_con .invited_links",function(){
        var fid = $(".share_file_con").attr("data-val");
        var read_only = $(".share_file_con").attr("read_only");
        $(".loading2").show();
        $.ajax({
            url: '/console/file_link2',
            data: {'fid':fid,'read_only':read_only},
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".invite_link_list_con .name span").text(name);
                    $(".invite_link_list_con .copy_link_list").html(data.copy_html);
                    $(".invite_link_list_con .share_link_list").html(data.share_html);
                    $(".invite_link_list_con .share_link_list").hide();
                    $(".invite_link_list_con .link_type .share_links").removeClass("show");
                    $(".invite_link_list_con .link_type .copy_links").addClass("show");
                    $(".invite_link_list_con .copy_link_list").show();
                    $(".invite_link_list_con .link_type").show();
                    $(".invite_link_list_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".invite_link_list_con .link_type .copy_links").click(function(){
        $(".invite_link_list_con .link_type .share_links").removeClass("show");
        $(this).addClass("show");
        $(".invite_link_list_con .share_link_list").hide();
        $(".invite_link_list_con .copy_link_list").show();
    });
    $(".invite_link_list_con .link_type .share_links").click(function(){
        $(".invite_link_list_con .link_type .copy_links").removeClass("show");
        $(this).addClass("show");
        $(".invite_link_list_con .copy_link_list").hide();
        $(".invite_link_list_con .share_link_list").show();
    });

    $(document).on("click",".invite_link_list_con .copy_url",function(){
        var password = $(this).parent().attr("data-val");
        var url = $(this).parent().find("span").text();
        var text = '';
        if(password){
            text = 'Link:'+url+' Password:'+password;
        }else{
            text = 'Link:'+url;
        }
        copyText(text);
    });

    $(document).on("click",".invite_link_list_con .file_link .link_del",function(){
        var link = $(this).parent().parent();
        var key = link.attr("data-key");
        $(".loading2").show();
        $.ajax({
            url: '/console/file_link_del',
            type: 'post',
            data: {'key':key},
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    link.remove();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".sidebar .user .user_info2").click(function(){
        $(".loading2").show();
        $.ajax({
            url: '/console/user_cards',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".FebCards_con .FebCards .user_card .avatar").attr("src",data.data.user.avatar);
                    $(".FebCards_con .FebCards .user_card .username").text(data.data.user.username);
                    if(data.data.user.family >= 1){
                        $(".FebCards_con .FebCards .user_card .status").html('<img src="/static/index_img/family.png" width="44">');
                    }else if(data.data.user.is_vip){
                        $(".FebCards_con .FebCards .user_card .status").html('<img src="/static/index_img/vip2.png" width="25">');
                    }else{
                        $(".FebCards_con .FebCards .user_card .status").html('<img src="/static/index_img/free2.png" width="30">');
                    }
                    $(".FebCards_con .FebCards .user_card .email").text(data.data.user.email);
                    $(".FebCards_con .FebCards .user_card .uid").text(data.data.user.uid_org);
                    if(data.data.user.family >= 1){
                        $(".FebCards_con .FebCards .user_card .family_info p:first-child").html('<span>'+fb_lang.console_cards_vip+' '+data.data.user.expire_time+'</span>');
                    }else if(data.data.user.is_vip){
                        $(".FebCards_con .FebCards .user_card .family_info p:first-child").html('<span>'+fb_lang.console_cards_vip2+' '+data.data.user.expire_time+'</span>');
                    }else{
                        $(".FebCards_con .FebCards .user_card .family_info p:first-child").html('');
                    }
                    $(".FebCards_con .FebCards .space_card .used p:first-child span:first-child").text(data.data.user.quota_used);
                    $(".FebCards_con .FebCards .space_card .used p:first-child span:last-child").text(data.data.user.quota_total);
                    if(data.data.user.family >= 1){
                        $(".FebCards_con .FebCards .space_card .used p:last-child span").text(data.data.user.family_member_count+' Users');
                    }else{
                        $(".FebCards_con .FebCards .space_card .used p:last-child").hide();
                    }
                    $(".FebCards_con .FebCards .space_card .progress p").css("width",data.data.user.progress+'%');
                    $(".FebCards_con .FebCards .space_card .progress .sub_space").css("width",data.data.user.sub_progress+'%');
                    $(".FebCards_con .FebCards .space_card .progress .exceed_progress").css("width",data.data.user.exceed_progress+'%');
                    $(".FebCards_con .FebCards .coins_card .card_info span").text(data.data.user.amount);
                    if(data.data.flow.off){
                        $(".FebCards_con .FebCards .speed_card .card_info p:first-child").text(fb_lang.console_speed_limited);
                    }else{
                        $(".FebCards_con .FebCards .speed_card .card_info p:first-child").text(fb_lang.console_no_limited);
                    }
                    if(data.data.flow.traffic_today_usage == '0 GB' && !data.data.flow.traffic_today_usage_mb){
                        $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(2)").hide();
                    }else{
                        if(data.data.flow.traffic_today_usage != '0 GB'){
                            $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(2)").text(data.data.flow.traffic_today_usage+' Used Today');
                        }else{
                            $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(2)").text(data.data.flow.traffic_today_usage_mb+'MB Used Today');
                        }
                    }
                    if(data.data.flow.traffic_yesterday_usage == '0 GB' && !data.data.flow.traffic_yesterday_usage_mb){
                        $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(3)").hide();
                    }else{
                        if(data.data.flow.traffic_yesterday_usage != '0 GB'){
                            $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(3)").text(data.data.flow.traffic_yesterday_usage+' Used Yesterday');
                        }else{
                            $(".FebCards_con .FebCards .speed_card .card_info .record:nth-child(3)").text(data.data.flow.traffic_yesterday_usage_mb+'MB Used Yesterday');
                        }
                    }
                    if(data.data.cards){
                        var arr = $(".FebCards_con .FebCards>div");
                        var arr2 = [];
                        arr2[0] = arr[0];
                        arr2[1] = $(".FebCards_con .FebCards #card"+data.data.cards.order[0])[0];
                        arr2[2] = $(".FebCards_con .FebCards #card"+data.data.cards.order[1])[0];
                        arr2[3] = $(".FebCards_con .FebCards #card"+data.data.cards.order[2])[0];
                        arr2[4] = $(".FebCards_con .FebCards #card"+data.data.cards.order[3])[0];
                        $(".FebCards_con .FebCards").html(arr2);

                        if(data.data.cards.vip_card == 1){
                            $(".vip_card").show();
                        }else{
                            $(".vip_card").hide();
                        }
                        if(data.data.cards.space_card == 1){
                            $(".space_card").show();
                        }else{
                            $(".space_card").hide();
                        }
                        if(data.data.cards.coins_card == 1){
                            $(".coins_card").show();
                        }else{
                            $(".coins_card").hide();
                        }
                        if(data.data.cards.speed_card == 1){
                            $(".speed_card").show();
                        }else{
                            $(".speed_card").hide();
                        }
                    }
                    $(".FebCards_popup").show();
                    $(".cards_set_popup").hide();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".FebCards_popup .popup_close").click(function(){
        $(".FebCards_popup").hide();
    });

    $(".my_plan_popup .my_plan_close").click(function(){
        $(".my_plan_popup").hide();
    });

    $(document).on("click",".FebCards_con .FebCards .user_card .family_info,.personal_info_con .subscription",function(){
        $(".loading2").show();
        $.ajax({
            url: '/console/user_plan',
            type: 'get',
            dataType: 'json',
            success: function (data) {
                $(".loading2").hide();
                if(data.code === 1){
                    $(".my_plan_con .plan_info .current_plan span:last-child").text(data.data.package_name);
                    $(".my_plan_con .plan_info .time span:last-child").text(data.data.current_plan_expire);
                    if(data.data.html){
                        $(".my_plan_con .members").html(data.data.html);
                        $(".my_plan_con .members").show();
                    }else{
                        $(".my_plan_con .members").hide();
                    }
                    $(".my_plan_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(document).on("click",".space_popup .space_close",function(){
        $(".space_popup").hide();
    });

    $(document).on("click",".sidebar .capacity_size,.FebCards_con .FebCards .space_card .space_info,.personal_info_con .my_space",function(){
        $(".loading2").show();
        $.ajax({
            url: '/console/user_space',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    $(".space_popup").html(data.html);
                    $(".space_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".FebCards_con .FebCards .speed_card").click(function () {
        $(".loading2").show();
        $.ajax({
            url: '/console/user_traffic_query',
            type: 'get',
            dataType: 'json',
            success: function(data){
                $(".loading2").hide();
                if(data.code === 1){
                    if(data['data']['used'] < 100){
                        $(".high_speed_con .high_speed .img img").attr('src', '/static/index_img/no_limit.png');
                    }else{
                        $(".high_speed_con .high_speed .img img").attr('src', '/static/index_img/limit.png');
                    }
                    $(".high_speed_con .high_speed .usage p:last-child").text(data['data']['traffic_usage']?data['data']['traffic_usage']:'0 GB'+' / '+data['data']['traffic_limit']?data['data']['traffic_limit']:'100 GB');
                    $(".high_speed_con .high_speed .flow_reset p:last-child").text(data['data']['reset_at']?data['data']['reset_at']:'0 Days');
                    $(".high_speed_popup").show();
                }else{
                    alert(data.msg);
                }
            }
        });
    });

    $(".high_speed_con .top .popup_close").click(function () {
        $(".high_speed_popup").hide();
    });

    $(".plan_history_popup .popup_close,.plan_history_popup .back").click(function(){
        $(".plan_history_popup").hide();
    });

    // $(document).on("click",".my_plan_con .plan_history",function(){
    //     $.ajax({
    //         url: '/console/order_list',
    //         type: 'get',
    //         dataType: 'json',
    //         success: function (data) {
    //             $(".loading2").hide();
    //             if(data.code === 1){
    //                 $(".plan_history_con .history_list .history_list_scroll").html(data.html);
    //                 $(".plan_history_popup").show();
    //             }else{
    //                 alert(data.msg);
    //             }
    //         }
    //     });
    // });

    history_list_page = 1;
    history_list_status = false;
    $(".plan_history_con .history_list").scroll(function(){
        var htmlHeight = $(".plan_history_con .history_list .history_list_scroll").height();
        var scrollTop = $(this).scrollTop();
        var height = $(this).height();
        if(scrollTop+height>=htmlHeight-1 && !history_list_status){
            history_list_status = true;
            history_list_page++;
            $.ajax({
                url: '/console/order_list',
                type: 'get',
                data: {'page':history_list_page},
                dataType: 'json',
                success: function(data){
                    history_list_status = false;
                    if(data.html){
                        $(".plan_history_con .history_list .history_list_scroll").append(data.data.html);
                    }else{
                        history_list_page--;
                    }
                }
            });
        }
    });

    $(".family_add_popup .popup_close").click(function(){
        $(".family_add_popup").hide();
    });

    $(document).on("click",".my_plan_con .members .add_family",function(){
        $(".family_add_popup").show();
    });

    $(document).on("click",".family_add_con .invite_btn",function(){
        var email = $(this).prev().val();
        if(email){
            $.ajax({
                url: '/console/family_invite',
                type: 'post',
                data: {'email':email},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        $(".family_add_popup").hide();
                        $(".success_tips span:nth-child(2)").text('Successful invitation');
                        $(".success_tips").show().delay(3000).hide(300);
                    }else{
                        alert(data.msg);
                    }
                }
            });
        }else{
            alert('Not Email');
        }
    });

    function getCookie(name){
        var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
        if(arr=document.cookie.match(reg)){
            return unescape(arr[2]);
        }else{
            return false;
        }
    }

    function setCookie(name,value) {
        var Days = 365;
        var exp = new Date();
        exp.setTime(exp.getTime() + Days*24*60*60*1000);
        document.cookie = name + "="+ value + ";expires=" + exp.toGMTString() + ";path=/";
    }

    function copyText(text) {
        if(typeof document.execCommand!=="function"){
            alert("复制失败，请长按复制");
            return;
        }
        var dom = document.createElement("textarea");
        dom.value = text;
        dom.setAttribute('style', 'display: block;width: 1px;height: 1px;');
        document.body.appendChild(dom);
        dom.select();
        var result = document.execCommand('copy');
        document.body.removeChild(dom);
        if (result) {
            // $(".success_tips span:nth-child(2)").text('Copy Successful');
            // $(".success_tips").show().delay(3000).hide(300);
            alert('Copy Successful');
            return;
        }
        if(typeof document.createRange!=="function"){
            alert("复制失败，请长按复制");
            return;
        }
        var range = document.createRange();
        var div=document.createElement('div');
        div.innerHTML=text;
        div.setAttribute('style', 'height: 1px;fontSize: 1px;overflow: hidden;');
        document.body.appendChild(div);
        range.selectNode(div);
        const selection = window.getSelection();
        if (selection.rangeCount > 0){
            selection.removeAllRanges();
        }
        selection.addRange(range);
        document.execCommand('Copy');
        alert('Copy Successful');
    }

    $(document).on("click", ".color1", function(){
        $(this).addClass("select");
        $(".color2").removeClass("select");
        $("body").addClass("body_white");
        $(".content").addClass("content_white");
        $(".footer").addClass("footer_white");
    });

    $(document).on("click", ".color2", function(){
        $(this).addClass("select");
        $(".color1").removeClass("select");
        $("body").removeClass("body_white");
        $(".content").removeClass("content_white");
        $(".footer").removeClass("footer_white");
    });
</script>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/jszip.min.js"></script>
    <script src="/static/plugins/viewer/js/viewer.min.js?rand=22da266f761676f71fe8891ff6af106a"></script>
    <script src="/static/js/jwplayer/jwplayer.js?rand=22da266f761676f71fe8891ff6af106a"></script>
    <script>jwplayer.key="a4eBtAyaqLJo6kCNQnBN+C35MscUBquB";</script>
    <script>
        var browser = '';
        var u = navigator.userAgent;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
        var isiPad = (u.indexOf('iPad') > -1 || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));
        var isiPhone = u.indexOf('iPhone') > -1;

        function copy_share_link () {
            var dom = document.getElementById('copy_share_link_input');
            if(typeof document.execCommand == "function"){
                dom.select();
                var result = document.execCommand('copy');
            }
        }
        $(function (){
            if (isAndroid) {
                var html = 'Install APP in Google Play';
            } else if (isiPad || isiPhone) {
                var html = 'Install APP in App Store';
            } else {
                var html = 'Install APP';
            }
            $('#install_app_store').html(html);
            var ua = 'axios/1.9.0';
            if (ua.indexOf('FBAV') > -1 && ua.indexOf('Android') > -1) {
                console.log('fb android');
                $('.share_tips, .tips2').show();
            } else if (ua.indexOf('FBAN') > -1 || ua.indexOf('FBIOS') > -1 || ua.indexOf('FBDV') > -1 || ua.indexOf('FBMD') > -1 || ua.indexOf('FBSN') > -1 || ua.indexOf('FBID') > -1 || ua.indexOf('FBLC') > -1 || ua.indexOf('FBOP') > -1) {
                console.log('fb ios');
                $('.share_tips, .tips2').show();
            } else if (ua.indexOf('Instagram') > -1 && ua.indexOf('iPhone') > -1) {
                console.log('Instagram ios');
                $('.share_tips, .tips6').show();
            } else if (ua.indexOf('Instagram') > -1 && ua.indexOf('Android') > -1) {
                console.log('Instagram Android');
                $('.share_tips, .tips3').show();
            } else if (ua.indexOf('Snapchat') > -1 && ua.indexOf('iPhone') > -1) {
                console.log('Snapchat iPhone');
                $('.share_tips, .tips6').show();
            } else if (ua.indexOf('Snapchat') > -1 && ua.indexOf('Android') > -1) {
                console.log('Snapchat Android');
                $('.share_tips, .tips4').show();
            } else if (ua.indexOf('TwitterAndroid') > -1) {
                console.log('TwitterAndroid');
                $('.share_tips, .tips').show();
            } else if (ua.indexOf('Safari/') > -1 && ua.indexOf('Mobile/') > -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Android') === -1 && ua.indexOf('Linux') === -1 ) {
                // console.log('safari');
                // $('.share_tips, .tips5').show();
            } else if (ua.indexOf('DingTalk/') > -1) {
                console.log('DingTalk');
                $('.share_tips, .tips4').show();
            }else if (ua.indexOf('WindowsWechat') > -1) {
                console.log('WindowsWechat');
                $('.share_tips, .tips7').show();
            }else if (ua.indexOf('MacWechat') > -1) {
                console.log('MacWechat');
                $('.share_tips, .tips8').show();
            }


            var nowTime = new Date();
            var offset = nowTime.getTimezoneOffset();
            console.log(offset);
            var link = 'febbox://share?region=world&shareid=LY16nsIi';
            $('#open_app_share').on('click', function () {
                copy_share_link();
                if ($(this).hasClass('disabled')) {
                    return fasle;
                }
                $('#jump_app_store').hide();
                var request_id = guid();
                var link = 'febbox://share?region=world&shareid=LY16nsIi&request_id='+request_id;
                console.log('sss');
                $(this).css({opacity:'0.5'}).addClass('disabled').text('Opening FEB APP ......');
                fid = new Array(2772277);
                var fids = JSON.stringify(fid);
                var share = '';
                $.ajax({
                    url:'/file/client_request',
                    type:'get',
                    data:{'request_id':request_id},
                    dataType:'json',
                    success:function(data){
                        if (data.code != 1) {
                            alert('download error');
                        }
                        var request_count = 0;
                        window.location.href=link;
                        fetch_request(request_id, request_count, fids, share);
                    }
                });
            });
                        // if (ua.indexOf('WindowsWechat') === -1 && ua.indexOf('MacWechat') === -1) {
            //     window.location.href = link;
            // }
            
            var forms = document.getElementsByClassName('needs-validation')

            // Loop over them and prevent submission
            Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false);
            });

            $('.format-time').each(function () {
                var time = parseInt($(this).attr('data-timestamp'))-0;
                console.log(time*1000);
                var date = new Date(time*1000);
                var year = date.getFullYear(),
                month = ("0" + (date.getMonth() + 1)).slice(-2),
                sdate = ("0" + date.getDate()).slice(-2),
                hour = ("0" + date.getHours()).slice(-2),
                minute = ("0" + date.getMinutes()).slice(-2),
                second = ("0" + date.getSeconds()).slice(-2);
                // 拼接
                var result = year + "-"+ month +"-"+ sdate +" "+ hour +":"+ minute;/* +":" + second;*/
                $(this).html(result);
            });

            $('.share_tips .close').click(function () {
                $('.share_tips').hide();
            });

            $(".share_more").click(function () {
                $('.more_operation').show();
            });
            $(document).click(function(e){
                if($(e.target).closest(".share_more").length === 0){
                    $('.more_operation').hide();
                }
            });
            $('#jump_app_store,#install_app_store').click(function (){
                copy_share_link();
                if (isAndroid) {
                    window.location.href = 'https://play.google.com/store/apps/details?id=com.topspeed.febbox2';
                } else if (isiPad || isiPhone) {
                    window.location.href = 'https://apps.apple.com/app/febbox-100g-cloud-storage/id1543861870';
                } else {
                    window.location.href = '/download';
                }
            });
            function fetch_request(request_id, request_count, fids, share) {
                $.ajax({
                    url:'/file/client_request_query',
                    type:'get',
                    data:{'request_id':request_id},
                    dataType:'json',
                    success:function(data){
                        if (data.code == 1) {
                            $('#install_app_store').hide();
                            $('#jump_app_store').hide();
                            $('#open_app_share').css({opacity:'1'}).removeClass('disabled').text('OPEN IN FEB APP');
                            console.log('client download success');
                            return true;
                        }
                        if (request_count == 5) {
                            $('#install_app_store').hide();
                            $('#jump_app_store').show();
                            $('#open_app_share').css({opacity:'1'}).removeClass('disabled').text('Reopen FEB APP');
                            //alert('open app error');
                            //file_download_exec(fids, share);
                            $('#jump_app_store').click();
                            return false;
                        }
                        request_count++;
                        setTimeout(function() {
                            fetch_request(request_id, request_count, fids, share);
                        }, 500);
                    }
                })
            }
        });
        function guid() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0,
                    v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }
    </script>
    <script>
        $(".file_share2_top .right2 .avatar,.file_info3 .file_top .right2 .avatar").click(function(e){
            e.stopPropagation();
            $(".sidebar").css("display","block");
            $.ajax({
                url: '/console/user_info',
                type: 'get',
                dataType: 'json',
                success: function(data){
                    $(".loading2").hide();
                    if(data.code === 1){
                        if(data.user.article_new == 1){
                            $(".sidebar ul li .new").css('display','inline-block');
                        }else{
                            $(".sidebar ul li .new").hide();
                        }
                        $(".sidebar .user .avatar2").attr("src",data.user.avatar);
                        $(".sidebar .user .name").html(data.user.username);
                        $(".sidebar .capacity .used").css("width",data.user.progress+'%');
                        $(".sidebar .capacity .sub_space").css("width",data.user.sub_progress+'%');
                        $(".sidebar .capacity .exceed_progress").css("width",data.user.exceed_progress+'%');
                        if(data.user.quota_used2 > data.user.quota_total2){
                            $(".sidebar .capacity_size .desc").html('<span class="exceed_space">'+data.user.quota_used+'</span> of '+data.user.quota_total+' Used');
                        }else{
                            $(".sidebar .capacity_size .desc").text(data.user.quota_used+' of '+data.user.quota_total+' Used');
                        }
                        $(".sidebar ul .feb_coins span").text('( '+data.user.amount+' )');
                        if(data.user.is_vip === 1){
                            if(data.user.family > 0){
                                $(".sidebar .user .status").html('<img src="/static/index_img/family.png" width="44">');
                            }else{
                                $(".sidebar .user .status").html('<img src="/static/index_img/vip2.png" width="25">');
                            }
                        }else{
                            $(".sidebar .user .status").html('<img src="/static/index_img/free2.png" width="30">');
                        }
                    }else{
                        // alert(data.msg);
                    }
                }
            });
        });

        $(document).click(function(){
            $(".sidebar").hide();
        });

        $(".download_progress .close2").click(function (){
            $(".download_progress").hide();
        });

        $(document).on("click", ".file_share2_top .download,.share_download .continue_d", function (){
            if($(this).parents('.download_tip_con').length === 0){
                            }else{
                $(".download_tip_popup2").hide();
            }
            $(".loading2").show();
            var share_key = "LY16nsIi";
            $.ajax({
                url: '/file/share_download',
                type: 'get',
                data: {'share_key':share_key},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        if(data.data.length > 1){
                            var files = [];
                            var total_size = 0;
                            for(var i=0; i < data.data.length; i++){
                                if(data.data[i].error == 0){
                                    if(data.data[i].path){
                                        data.data[i].path = data.data[i].path+'/';
                                    }
                                    var aa = {'url':data.data[i].download_url, 'name':data.data[i].path+data.data[i].file_name}
                                    files.push(aa);
                                    total_size += data.data[i].file_size;
                                }
                            }

                            var zip = new JSZip();

                            const progressElement = document.getElementById('progress');
                            var download_size = 0;

                            var fetchPromises = files.map(function(file) {
                                $(".download_progress .name").text('Downloading');
                                $(".download_progress").show();
                                return fetch(file.url)
                                    .then(response => {
                                        // 进度条相关
                                        // 获取 Response 对象的 body 属性的读取器（reader）。body 属性是一个可读的流（ReadableStream），可以用来读取响应体的数据。
                                        const reader = response.body.getReader();
                                        // const contentLength = +response.headers.get('Content-Length');
                                        let receivedLength = 0;
                                        let chunks = [];
                                        // 读取一个数据块。这个方法返回一个 Promise，当一个数据块被读取时，这个 Promise 就会解析为一个包含 done 和 value 属性的对象。done 属性表示是否已经读取完所有数据，value 属性是一个 Uint8Array，包含了读取到的数据块。
                                        return reader.read().then(function processChunk({ done, value }) {
                                            if (done) {
                                                // 将 chunks 数组中的所有数据块复制到一个新的 Uint8Array 中，然后使用这个 Uint8Array 创建一个 Blob 对象
                                                let data = new Uint8Array(receivedLength);
                                                let position = 0;
                                                for(let chunk of chunks) {
                                                    data.set(chunk, position);
                                                    position += chunk.length;
                                                }
                                                return new Blob([data]);
                                            }
                                            // 将读取到的数据块添加到 chunks 数组中。
                                            chunks.push(value);
                                            // 更新已接收的数据长度。
                                            receivedLength += value.length;
                                            download_size += value.length;
                                            console.log(`已下载：${download_size}，总大小：${total_size}`);
                                            const percent = Math.round((download_size / total_size) * 100);
                                            progressElement.value = percent;
                                            // 递归调用 reader.read()，直到读取完所有数据。
                                            return reader.read().then(processChunk);
                                        });
                                    })
                                    .then(blob => {
                                        zip.file(file.name, blob);
                                    });
                            });

                            Promise.all(fetchPromises).then(function() {
                                zip.generateAsync({ type: 'blob' }, function(metadata) {
                                    // 更新进度条
                                    // var percent = Math.round(metadata.percent);
                                    // console.log(percent);
                                    // document.getElementById('progress').value = percent;
                                }).then(function(content) {
                                    $(".download_progress .name").text('Download complete');
                                    var link = document.createElement('a');
                                    link.href = URL.createObjectURL(content);
                                    link.download = data.download_name;
                                    link.click();
                                });
                            }).catch(function(error) {
                                console.error('Error:', error);
                            });
                        }else{
                            let a = document.createElement('a');
                            a.download = data.data[0].file_name
                            a.style.display = 'none';
                            a.href = data.data[0].download_url;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                        }
                        // if (isiPad || isiPhone) {
                        //     window.location.href = data.data[0].download_url;
                        // }else{
                        //     window.open(data.data[0].download_url);
                        // }
                    }else{
                        if(data.code === -9){
                            if(data.data.thumb){
                                $(".download_tips .download_file_info .file_img img").attr("src",data.data.thumb);
                            }else{
                                $(".download_tips .download_file_info .file_img img").attr("src","/static/index_img/file_type/"+data.data.file_icon+".png");
                            }
                            $(".download_tips .download_file_info .file_name").text(data.data.file_name);
                            $(".download_tips .download_file_info .file_size").text(data.data.file_size);
                            $(".download_tips_popup").show();
                            return;
                        }
                        alert(data.msg);
                    }
                }
            })
        });

        $(".download_tip_con .popup_close").click(function (){
            $(".download_tip_popup2").hide();
        });

        $(".login_tip_con .popup_close").click(function (){
            $(".login_tip_popup").hide();
        });

        $(".file_info3 .close2").click(function (){
            $(".file_info3").hide();
        });

        $(document).on('click', '.files .file_list .file,.files .file_list .file_thumbnail', function (){
            if($(this).hasClass('open_dir')){
                return;
            }

            var id = $(this).attr('data-id');
            $(".loading2").show();
            $.ajax({
                url: '/file/file_info',
                type: 'get',
                data: {'fid':id},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        $(".file_info3 .info2 .name").text(data.data.file.file_name);
                        $(".file_info3 .info2 .desc").text(data.data.file.update_time2+' · '+data.data.file.file_size);
                        if(data.data.file.file_icon == 'img_icon' || data.data.file.file_icon == 'video_icon'){
                            if(data.data.file.file_icon == 'img_icon'){
                                var class_name = 'show_img';
                            }
                            if(data.data.file.file_icon == 'video_icon'){
                                var class_name = 'play_video';
                            }
                            $(".file_info3 .file_img").css({'height':'100%','display':'flex','align-items':'center','justify-content':'center'}).html('<img src="'+data.data.file.thumb_big+'" class="file_icon '+class_name+'" data-id="'+id+'" style="max-width:100%;max-height:100%;">');
                            if(data.data.file.file_icon == 'video_icon'){
                                $(".file_info3 .file_img").append('<img src="/static/index_img/play_video.png" width="66" class="play_img">');
                            }
                        }else{
                            if(data.data.file.thumb){
                                $(".file_info3 .file_img").html('<img src="'+data.data.file.thumb+'" class="file_icon" style="max-width:100%;max-height:100%;">');
                            }else if(data.data.file.thumb_big){
                                $(".file_info3 .file_img").html('<img src="'+data.data.file.thumb_big+'" class="file_icon" style="max-width:100%;max-height:100%;">');
                            }else{
                                $(".file_info3 .file_img").html('<img src="/static/index_img/file_type/'+data.data.file.file_icon+'2.png" class="file_icon">');
                            }
                            $(".file_info3 .file_img").css({'height':'','display':'','align-items':'','justify-content':''});
                            $(".file_info3 .file_img").append('<p class="tip">This type of file cannot be previewed at the moment, please <a href="javascript:;">download</a> it locally and open it with another application.</p>')
                        }
                        $(".file_info3").attr('data-id',id).show();
                    }else{
                        alert(data.msg);
                    }
                }
            })
        });

        $(".file_details_popup .popup_close").click(function(){
            $(".file_details_popup").hide();
        });

        $(document).on("click",".file_share2_top .details,.file_info3 .details",function(){
            var share_key = "LY16nsIi";
            if($(this).parents('.file_share2_top').length > 0){
                var fid = $(this).attr('data-id');
            }else{
                var fid = $('.file_info3').attr('data-id');
            }
            $(".loading_popup").show();
            $.ajax({
                url: '/file/file_more_info',
                type: 'post',
                data: {'share_key':share_key,'fid':fid},
                dataType: 'json',
                success: function(data){
                    $(".loading_popup").hide();
                    if(data.code===1){
                        $(".file_details_popup .file_details_con").html(data.html)
                        $(".file_details_popup .file_details_con").animate( { scrollTop: 0 } );
                        $(".file_details_popup .file_details").attr("data-id",data.id).attr("data-val",data.param);
                        $(".file_details_popup .file_details").attr("data-fid",data.fid);
                        $(".file_details_popup").show();
                    }else{
                        alert(data.msg);
                        // $(".error_tips .txt").text(data.msg);
                        // $(".error_tips").show().delay(3000).hide(300);
                    }
                }
            });
        });

        $(".download_tips_popup .popup_close").click(function(){
            $(".download_tips_popup").hide();
        });

        $(document).on("click", ".movie_file_quality_con .popup_close", function(){
            $(".movie_file_quality_popup").hide();
        });

        $(document).on("click", ".movie_file_quality_con .file_quality", function (){
            var url = $(this).attr('data-url');
            var file_name = $(".movie_file_quality_con").attr('data-name');
            var quality = $(this).attr('data-quality');
            var ext = file_name.split('.').pop();
            file_name = file_name.replace('.'+ext, '_'+quality+ext);
            $(".movie_file_quality_popup").hide();
            let a = document.createElement('a');
            a.download = file_name
            a.target = '_blank'
            a.style.display = 'none';
            a.href = url;
            document.body.appendChild(a);
            a.click();
            console.log(a);
            document.body.removeChild(a);
        });

        $(document).on("click", ".file_info3 .download,.file_download .continue_d", function (){
            if($(this).parents('.download_tip_con').length === 0){
                var fid = $('.file_info3').attr('data-id');
                            }else{
                var fid = $('.download_tip_con').attr('data-id');
                $(".download_tip_popup2").hide();
            }
            if($(".file_info3 .play_video").length > 0){
                var name = $('.file_info3 .info2 .name').text();
                $(".loading2").show();
                $.ajax({
                    url: '/console/video_quality_list',
                    type: 'get',
                    data: {'fid':fid},
                    dataType: 'json',
                    success: function(data){
                        $(".loading2").hide();
                        if(data.code===1){
                            $(".movie_file_quality_con .movie_file_quality").html(data.html);
                            $(".movie_file_quality_con").attr('data-name', name);
                            $(".movie_file_quality_popup").show();
                        }else{
                            alert(data.msg);
                        }
                    }
                });
            }else{
                $(".loading2").show();
                var share_key = "LY16nsIi";
                $.ajax({
                    url: '/file/file_download',
                    type: 'post',
                    data: {'share_key':share_key,'fid':fid},
                    dataType: 'json',
                    success: function (data) {
                        $(".loading2").hide();
                        if(data.code === 1){
                            let a = document.createElement('a');
                            a.download = data.data[0].file_name
                            a.style.display = 'none';
                            a.href = data.data[0].download_url;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            // if (isiPad || isiPhone) {
                            //     window.location.href = data.data[0].download_url;
                            // }else{
                            //     window.open(data.data[0].download_url);
                            // }
                        }else{
                            if(data.code === -9){
                                if(data.data.thumb){
                                    $(".download_tips .download_file_info .file_img img").attr("src",data.data.thumb);
                                }else{
                                    $(".download_tips .download_file_info .file_img img").attr("src","/static/index_img/file_type/"+data.data.file_icon+".png");
                                }
                                $(".download_tips .download_file_info .file_name").text(data.data.file_name);
                                $(".download_tips .download_file_info .file_size").text(data.data.file_size);
                                $(".download_tips_popup").show();
                                return;
                            }
                            alert(data.msg);
                        }
                    }
                })
            }
        });

        $(document).on('click', '.open_dir', function (){
            var share_key = "LY16nsIi";
            var pwd = "";
            var p_id = $(this).attr('data-id');
            var path_name = $(this).attr('data-path');
            $(".loading2").show();
            $.ajax({
                url: '/file/file_share_list',
                type: 'get',
                data: {'share_key':share_key, 'pwd':pwd, 'parent_id':p_id, 'is_html':1},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        page = 1;
                        $('.share .files .info .path').append('<span class="splitter">/</span><span data-id="'+p_id+'">'+path_name+'</span>');
                        $(".share .files .file_list .f_list_scroll").html(data.html);
                    }else{
                        alert.msg(data.msg);
                    }
                }
            })
        });

        $(document).on('click', '.files .info .path span:not(:last-child)', function (){
            if($(this).hasClass('splitter')){
                return;
            }
            var share_key = "LY16nsIi";
            var pwd = "";
            var p_id = $(this).attr('data-id');
            var path = $(this);
            $(".loading2").show();
            $.ajax({
                url: '/file/file_share_list',
                type: 'get',
                data: {'share_key':share_key, 'pwd':pwd, 'parent_id':p_id, 'is_html':1},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        page = 1;
                        path.nextAll().remove();
                        $(".share .files .file_list .f_list_scroll").html(data.html);
                    }else{
                        alert.msg(data.msg);
                    }
                }
            })
        });

        $(document).on('click', '.files .info .list_type img', function (){
            var old_type = getCookie('share_file_mode');
            var type = $(this).attr("class");
            if(old_type == type){
                return;
            }
            if(old_type == 'list' || !old_type){
                $(".files .info .list_type .list").attr('src', '/static/index_img/list2.png');
            }
            if(old_type == 'waterfall'){
                $(".files .info .list_type .waterfall").attr('src', '/static/index_img/waterfall.png');
            }
            if(old_type == 'grid'){
                $(".files .info .list_type .grid").attr('src', '/static/index_img/grid.png');
            }
            if(old_type == 'grid2'){
                $(".files .info .list_type .grid2").attr('src', '/static/index_img/grid2.png');
            }
            setCookie('share_file_mode', type);
            if(type == 'list'){
                $(".files .info .list_type .list").attr('src', '/static/index_img/list.png');
            }
            if(type == 'waterfall'){
                $(".files .info .list_type .waterfall").attr('src', '/static/index_img/waterfall_active.png');
            }
            if(type == 'grid'){
                $(".files .info .list_type .grid").attr('src', '/static/index_img/grid_active.png');
            }
            if(type == 'grid2'){
                $(".files .info .list_type .grid2").attr('src', '/static/index_img/grid2_active.png');
            }
            var share_key = "LY16nsIi";
            var pwd = "";
            var p_id = $('.files .info .path span:last-child').attr('data-id');
            $(".loading2").show();
            $.ajax({
                url: '/file/file_share_list',
                type: 'get',
                data: {'share_key':share_key, 'pwd':pwd, 'parent_id':p_id, 'is_html':1},
                dataType: 'json',
                success: function (data) {
                    $(".loading2").hide();
                    if(data.code === 1){
                        page = 1;
                        if(type == 'list'){
                            var class_name = 'file_list icon_list';
                        }else if(type == 'waterfall'){
                            var class_name = 'file_list waterfall_list';
                        }else if(type == 'grid'){
                            var class_name = 'file_list gridType_list';
                        }else if(type == 'grid2'){
                            var class_name = 'file_list gridType_list2';
                        }
                        $('.share .files .file_list').attr('class', class_name);
                        $(".share .files .file_list .f_list_scroll").html(data.html);
                    }else{
                        alert.msg(data.msg);
                    }
                }
            })
        });

                var play_id = '';
        if(play_id){
            var share_key = "LY16nsIi";
            $('.video_con').css({height:'90%'});
            $(".video_con #player_loading").show();
            $('#video_bg').show();
            $('#player_box').remove();
            $('#player_panel').html('<div id="player_box" class="player_box"></div>');
            window.history.pushState('', '', '/share/'+share_key);
            $.ajax({
                type : 'POST',
                url : '/file/player',
                data : {'fid':play_id,'share_key':share_key},
                dataType : 'text',
                success: function(data){
                    try {
                        var data2 = $.parseJSON(data);
                        if(data2.code < 0){
                            $('#video_bg').hide();
                            $('#player_box').remove();
                            $(".error_tips .txt").text(data2.msg);
                            $(".error_tips").show().delay(3000).hide(300);
                            return false;
                        }
                    } catch (d) {

                    }
                    $('#player_box').html(data);
                    $(".video_con #player_loading").hide();
                    // $('.video_con').css({height:'auto'});
                },
                error: function(){
                    alert("network error");
                    $(".video_con #player_loading").hide();
                }
            });
        }
        
        $(document).on("click",".share .play_img,.file_info3 .play_img",function(){
                        var fid = $(this).prev().attr('data-id');
            var share_key = "LY16nsIi";
            $('.video_con').css({height:'90%'});
            $(".video_con #player_loading").show();
            $('#video_bg').show();
            $('#player_box').remove();
            $('#player_panel').html('<div id="player_box" class="player_box"></div>');
            $.ajax({
                type : 'POST',
                url : '/file/player',
                data : {'fid':fid,'share_key':share_key},
                dataType : 'text',
                success: function(data){
                    try {
                        var data2 = $.parseJSON(data);
                        if(data2.code < 0){
                            $('#video_bg').hide();
                            $('#player_box').remove();
                            $(".error_tips .txt").text(data2.msg);
                            $(".error_tips").show().delay(3000).hide(300);
                            return false;
                        }
                    } catch (d) {

                    }
                    $('#player_box').html(data);
                    $(".video_con #player_loading").hide();
                    // $('.video_con').css({height:'auto'});
                },
                error: function(){
                    alert("network error");
                    $(".video_con #player_loading").hide();
                }
            });
        });

        $(document).on("click",".login_tip img",function(){
            $(".login_tip").hide();
        });

        var page = 1;
        var end = false;
        $(".share .files .file_list").scroll(function () {
            var htmlHeight=$(".share .files .file_list .f_list_scroll").height();
            var clientHeight=$(this).height();
            var scrollTop=$(this).scrollTop();
            // console.log(htmlHeight,clientHeight,scrollTop);
            if(scrollTop+clientHeight>=htmlHeight-1 && !end){
                end = true;
                $(".loading2").show();
                var id = $(".share .files .info .path span:last-child").attr("data-id");
                if(!id){
                    id = 0;
                }
                var share_key = "LY16nsIi";
                var pwd = "";
                page++;
                $.ajax({
                    url: '/file/file_share_list?page='+page,
                    type: 'get',
                    data: {'share_key':share_key,'pwd':pwd,'parent_id':id,'is_html':1},
                    dataType: 'json',
                    success: function (data) {
                        end = false;
                        $(".loading2").hide();
                        if(data.code === 1){
                            if(!data.html){
                                page--;
                            }
                            $(".share .files .file_list .f_list_scroll").append(data.html);
                        }else{
                            page--;
                            alert(data.msg);
                        }
                    }
                });
            }
        });

        $(document).on("click",".show_img",function(){
            var share_key = "LY16nsIi";
            var fid = $(this).attr('data-id');
            $.ajax({
                url: '/file/show_img2',
                type: 'get',
                data: {'fid':fid,'share_key':share_key},
                dataType: 'json',
                success: function(data){
                    $(".img_lists").html(data.html);
                    var index = $("#img_lists .show").index();
                    $('#img_lists').viewer("update");
                    $('#img_lists').viewer("view",index);
                    $(".viewer-container").css('z-index','9999');
                }
            });
        });

        $(document).on("click",".viewer-next",function(e){
            var img = $(".img_lists .show").next();
            if(img.length > 0) {
                $(".img_lists .show").removeClass("show");
                img.addClass("show");
            }else{
                var fid = $(".img_lists .show").attr('data-id');
                var share_key = "LY16nsIi";
                $.ajax({
                    url: '/file/show_img2',
                    type: 'get',
                    data: {'fid':fid,'share_key':share_key,'slide_type':'forward'},
                    dataType: 'json',
                    success: function(data){
                        if($(".viewer-container").is(":hidden")){
                            return;
                        }
                        if(data.html){
                            $(".img_lists").append(data.html);
                            var img = $(".img_lists .show").next();
                            $(".img_lists .show").removeClass("show");
                            img.addClass("show");
                            var index = $("#img_lists .show").index();
                            $('#img_lists').viewer("update");
                            $('#img_lists').viewer("view",index);
                        }
                    }
                });
            }
        });

        $(document).on("click",".viewer-prev",function(e){
            var img = $(".img_lists .show").prev();
            if(img.length > 0) {
                $(".img_lists .show").removeClass("show");
                img.addClass("show");
            }else{
                var fid = $(".img_lists .show").attr('data-id');
                var share_key = "LY16nsIi";
                $.ajax({
                    url: '/file/show_img2',
                    type: 'get',
                    data: {'fid':fid,'share_key':share_key,'slide_type':'backward'},
                    dataType: 'json',
                    success: function(data){
                        if($(".viewer-container").is(":hidden")){
                            return;
                        }
                        if(data.html){
                            $(".img_lists").prepend(data.html);
                            var img = $(".img_lists .show").prev();
                            $(".img_lists .show").removeClass("show");
                            img.addClass("show");
                            var index = $("#img_lists .show").index();
                            $('#img_lists').viewer("update");
                            $('#img_lists').viewer("view",index);
                        }
                    }
                });
            }
        });

        $(".dir_info_popup .popup_close").click(function(){
            $(".dir_info_popup").hide();
            $("body").css("overflow","");
        });

        function getCookie(name){
            var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
            if(arr=document.cookie.match(reg)){
                return unescape(arr[2]);
            }else{
                return false;
            }
        }

        function setCookie(name,value) {
            var Days = 365;
            var exp = new Date();
            exp.setTime(exp.getTime() + Days*24*60*60*1000);
            document.cookie = name + "="+ value + ";expires=" + exp.toGMTString() + ";path=/";
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9460016c7856a929',t:'MTc0ODI5MTE2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
<script>

</script>